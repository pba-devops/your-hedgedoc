(function(D){function o(n){for(var l=n[0],v=n[1],O=n[2],y,u,I=0,w=[];I<l.length;I++)u=l[I],Object.prototype.hasOwnProperty.call(g,u)&&g[u]&&w.push(g[u][0]),g[u]=0;for(y in v)Object.prototype.hasOwnProperty.call(v,y)&&(D[y]=v[y]);for(A&&A(n);w.length;)w.shift()();return M.push.apply(M,O||[]),s()}function s(){for(var n,l=0;l<M.length;l++){for(var v=M[l],O=!0,y=1;y<v.length;y++){var u=v[y];g[u]!==0&&(O=!1)}O&&(M.splice(l--,1),n=h(h.s=v[0]))}return n}var e={},g={6:0},M=[];function h(n){if(e[n])return e[n].exports;var l=e[n]={i:n,l:!1,exports:{}};return D[n].call(l.exports,l,l.exports,h),l.l=!0,l.exports}h.m=D,h.c=e,h.d=function(n,l,v){h.o(n,l)||Object.defineProperty(n,l,{enumerable:!0,get:v})},h.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},h.t=function(n,l){if(l&1&&(n=h(n)),l&8||l&4&&typeof n=="object"&&n&&n.__esModule)return n;var v=Object.create(null);if(h.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:n}),l&2&&typeof n!="string")for(var O in n)h.d(v,O,function(y){return n[y]}.bind(null,O));return v},h.n=function(n){var l=n&&n.__esModule?function(){return n.default}:function(){return n};return h.d(l,"a",l),l},h.o=function(n,l){return Object.prototype.hasOwnProperty.call(n,l)},h.p="build/";var m=window.webpackJsonp=window.webpackJsonp||[],d=m.push.bind(m);m.push=o,m=m.slice();for(var P=0;P<m.length;P++)o(m[P]);var A=d;return M.push([688,0,4]),s()})({17:function(D,o){D.exports=moment},18:function(D,o,s){"use strict";(function(e,g){Object.defineProperty(o,"__esModule",{value:!0}),o.setloginStateChangeEvent=n,o.resetCheckAuth=l,o.setLoginState=v,o.checkLoginStateChanged=O,o.getLoginState=y,o.getUserId=u,o.clearLoginState=I,o.checkIfAuth=w;var M=s(19),h=!1,m=null,d=y(),P=u(),A=null;function n(T){A=T}function l(){h=!1}function v(T,E){e.set("loginstate",T,{expires:365,sameSite:window.cookiePolicy,secure:window.location.protocol==="https:"}),E?e.set("userid",E,{expires:365,sameSite:window.cookiePolicy,secure:window.location.protocol==="https:"}):e.remove("userid",{sameSite:window.cookiePolicy,secure:window.location.protocol==="https:"}),d=T,P=E,O()}function O(){return y()!==d||u()!==P?(A&&setTimeout(A,100),!0):!1}function y(){var T=e.get("loginstate");return T==="true"||T===!0}function u(){return e.get("userid")}function I(){e.remove("loginstate")}function w(T,E){var J=y();O()&&(h=!1),!h||typeof J=="undefined"?g.get(M.serverurl+"/me").done(function(R){R&&R.status==="ok"?(m=R,T(m),v(!0,R.id)):(E(),v(!1))}).fail(function(){E()}).always(function(){h=!0}):J?T(m):E()}o.default={checkAuth:h,profile:m,lastLoginState:d,lastUserId:P,loginStateChangeEvent:A}}).call(this,s(21),s(3))},19:function(D,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var e=o.DROPBOX_APP_KEY=window.DROPBOX_APP_KEY||"",g=o.domain=window.domain||"",M=o.urlpath=window.urlpath||"",h=o.debug=window.debug||!1,m=o.port=window.location.port,d=o.serverurl=window.location.protocol+"//"+(g||window.location.hostname)+(m?":"+m:"")+(M?"/"+M:"");window.serverurl=d;var P=o.noteid=decodeURIComponent(M?window.location.pathname.slice(M.length+1,window.location.pathname.length).split("/")[1]:window.location.pathname.split("/")[1]),A=o.noteurl=d+"/"+P,n=o.version=window.version},263:function(D,o,s){"use strict";(function(e,g){Object.defineProperty(o,"__esModule",{value:!0});var M=s(36),h=w(M);o.saveHistory=E,o.saveStorageHistoryToServer=B,o.clearDuplicatedHistory=Y,o.removeHistory=K,o.writeHistory=V,o.getHistory=H,o.getStorageHistory=S,o.parseHistory=k,o.parseServerToHistory=C,o.parseStorageToHistory=z,o.postHistoryToServer=U,o.deleteServerHistory=x;var m=s(235),d=w(m),P=s(46),A=w(P),n=s(236),l=w(n),v=s(237),O=w(v),y=s(264),u=s(18),I=s(19);function w(r){return r&&r.__esModule?r:{default:r}}window.migrateHistoryFromTempCallback=null,T();function T(){(0,O.default)("#tempid")&&e.get(serverurl+"/temp",{tempid:(0,O.default)("#tempid")}).done(function(r){r&&r.temp&&S(function(t){(!t||t.length===0)&&J(JSON.parse(r.temp))})}).always(function(){var r=location.hash.split("#")[1];r=r.split("&");for(var t=0;t<r.length;t++)r[t].indexOf("tempid")===0&&(r.splice(t,1),t--);r=r.join("&"),location.hash=r,window.migrateHistoryFromTempCallback&&window.migrateHistoryFromTempCallback()})}function E(r){(0,u.checkIfAuth)(function(){R(r)},function(){J(r)})}function J(r){d.default.set("notehistory",(0,h.default)(r))}function R(r){e.post(serverurl+"/history",{history:(0,h.default)(r)})}function B(r){var t=d.default.get("notehistory");t&&e.post(serverurl+"/history",{history:t}).done(function(i){r(i)})}function Y(r){for(var t=[],i=0;i<r.length;i++){for(var f=!1,b=0;b<t.length;b++){var N=r[i].id.replace(/=+$/,""),X=t[b].id.replace(/=+$/,"");if(N===X||r[i].id===t[b].id||!r[i].id||!t[b].id){var G=typeof r[i].time=="number"?g(r[i].time):g(r[i].time,"MMMM Do YYYY, h:mm:ss a"),Q=typeof t[i].time=="number"?g(t[i].time):g(t[i].time,"MMMM Do YYYY, h:mm:ss a");G>=Q&&(t[b]=r[i]),f=!0;break}}f||t.push(r[i])}return t}function W(r,t,i,f,b,N){return r&&N.push({id:r,text:t,time:i,tags:f,pinned:b}),N}function K(r,t){for(var i=0;i<t.length;i++)t[i].id===r&&(t.splice(i,1),i-=1);return t}function V(r,t){(0,u.checkIfAuth)(function(){},function(){a(r,t)})}function a(r,t){var i=d.default.get("notehistory"),f=void 0;i&&typeof i=="string"?f=JSON.parse(i):f=[];var b=p(r,t,f);J(b)}Array.isArray||(Array.isArray=function(r){return Object.prototype.toString.call(r)==="[object Array]"});function c(r,t){var i=I.urlpath?location.pathname.slice(I.urlpath.length+1,location.pathname.length).split("/")[1]:location.pathname.split("/")[1];return{id:i,text:r,time:g().valueOf(),tags:t}}function p(r,t,i){for(var f=c(r,t),b=!1,N=0;N<i.length;N++)if(i[N].id===f.id&&i[N].pinned){b=!0;break}return i=K(f.id,i),i=W(f.id,f.text,f.time,f.tags,b,i),i=Y(i),i}function H(r){(0,u.checkIfAuth)(function(){L(r)},function(){S(r)})}function L(r){e.get(serverurl+"/history").done(function(t){t.history&&r(t.history)}).fail(function(t,i,f){console.error(t.responseText)})}function S(r){var t=d.default.get("notehistory");t&&(typeof t=="string"&&(t=JSON.parse(t)),r(t)),r([])}function k(r,t){(0,u.checkIfAuth)(function(){C(r,t)},function(){z(r,t)})}function C(r,t){e.get(serverurl+"/history").done(function(i){i.history&&F(r,i.history,t)}).fail(function(i,f,b){console.error(i.responseText)})}function z(r,t){var i=d.default.get("notehistory");i&&(typeof i=="string"&&(i=JSON.parse(i)),F(r,i,t)),F(r,[],t)}function F(r,t,i){if(i){if(!r||!t)i(r,t);else if(t&&t.length>0)for(var f=0;f<t.length;f++){try{var b=l.default.decompressFromBase64(t[f].id);b&&(0,y.checkNoteIdValid)(b)&&(t[f].id=(0,y.encodeNoteId)(b))}catch(X){console.error(X)}var N=typeof t[f].time=="number"?g(t[f].time):g(t[f].time,"MMMM Do YYYY, h:mm:ss a");t[f].timestamp=N.valueOf(),t[f].fromNow=N.fromNow(),t[f].time=N.format("llll"),t[f].text=(0,A.default)(t[f].text).escapeHTML().s,t[f].tags=t[f].tags&&t[f].tags.length>0?(0,A.default)(t[f].tags).escapeHTML().s.split(","):[],t[f].id&&r.get("id",t[f].id).length===0&&r.add(t[f])}}else return;i(r,t)}function U(r,t,i){e.post(serverurl+"/history/"+r,t).done(function(f){return i(null,f)}).fail(function(f,b,N){return console.error(f.responseText),i(N,null)})}function x(r,t){e.ajax({url:serverurl+"/history"+(r?"/"+r:""),type:"DELETE"}).done(function(i){return t(null,i)}).fail(function(i,f,b){return console.error(i.responseText),t(b,null)})}}).call(this,s(3),s(17))},264:function(D,o,s){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0}),o.checkNoteIdValid=d,o.encodeNoteId=P,o.decodeNoteId=A;var g=s(281),M=h(g);function h(n){return n&&n.__esModule?n:{default:n}}var m=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;function d(n){var l=n.match(m);return!!(l&&l.length===1)}function P(n){var l=n.replace(/-/g,""),v=e.from(l,"hex");return M.default.encode(v)}function A(n){var l=M.default.toBuffer(n).toString("hex"),v=[];return v.push(l.substr(0,8)),v.push(l.substr(8,4)),v.push(l.substr(12,4)),v.push(l.substr(16,4)),v.push(l.substr(20,12)),v.join("-")}}).call(this,s(26).Buffer)},268:function(D,o,s){"use strict";(function(e){e(document).on("shown.bs.modal",function(g){e(g.target).attr("aria-hidden","false")}).on("hidden.bs.modal",function(g){e(g.target).attr("aria-hidden","true")})}).call(this,s(3))},3:function(D,o){D.exports=$},32:function(D,o,s){"use strict";(function(e,g){var M=s(244),h=n(M),m=s(247),d=n(m),P=s(219),A=n(P);function n(u){return u&&u.__esModule?u:{default:u}}var l=s(33);function v(){if(e.get("locale")){var u=e.get("locale");return u==="zh"&&(u="zh-TW"),u}var I=navigator.language||navigator.userLanguage,w=I.split("-")[0],T=(0,A.default)(l);return T.includes(w)?w:T.includes(I)?I:"en"}var O=v(),y=g(".ui-locale");(0,d.default)(l).forEach(function(u){var I=(0,h.default)(u,2),w=I[0],T=I[1];y.append('<option value="'+w+'">'+T+"</option>")}),y.length>0&&(y.val(O),g('select.ui-locale option[value="'+O+'"]').attr("selected","selected"),y.change(function(){e.set("locale",g(this).val(),{expires:365,sameSite:window.cookiePolicy,secure:window.location.protocol==="https:"}),window.location.reload()})),window.moment.locale(O)}).call(this,s(21),s(3))},33:function(D){D.exports=JSON.parse('{"en":"English","ar":"\u0627\u0644\u0639\u0631\u0628\u064A\u0629","bg":"\u0431\u044A\u043B\u0433\u0430\u0440\u0441\u043A\u0438 \u0435\u0437\u0438\u043A","ca":"Catal\xE0","cs":"\u010Cesky","da":"Dansk","de":"Deutsch","el":"\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC","eo":"Esperanto","es":"Espa\xF1ol","eu":"Euskara","fa":"\u0641\u0627\u0631\u0633\u06CC","fr":"Fran\xE7ais","gl":"Galego","he":"\u05E2\u05D1\u05E8\u05D9\u05EA","hi":"\u0939\u093F\u0928\u094D\u0926\u0940","hr":"Hrvatski","hu":"Magyar","id":"Bahasa Indonesia","it":"Italiano","ja":"\u65E5\u672C\u8A9E","ko":"\uD55C\uAD6D\uC5B4","lt":"Lietuvi\u0173 kalba","ml":"\u0D2E\u0D32\u0D2F\u0D3E\u0D33\u0D02","nb":"Norsk bokm\xE5l","nl":"Nederlands","nl-be":"Nederlands (Belgi\xEB)","oc":"Occitan","pl":"Polski","pt":"Portugu\xEAs","pt-br":"Portugu\xEAs do Brasil","ro":"Rom\xE2n\u0103","ru":"\u0420\u0443\u0441\u0441\u043A\u0438\u0439","sk":"Slovensky","sl":"Slovenski jezik","sr":"C\u0440\u043F\u0441\u043A\u0438","sv":"Svenska","tr":"T\xFCrk\xE7e","uk":"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430","vi":"Ti\u1EBFng Vi\u1EC7t","zh-CN":"\u7B80\u4F53\u4E2D\u6587","zh-TW":"\u7E41\u9AD4\u4E2D\u6587"}')},34:function(D,o,s){"use strict";s.r(o)},454:function(D,o,s){"use strict";(function(e,g){var M=s(36),h=O(M),m=s(18),d=s(263),P=s(217),A=s(224),n=O(A),l=s(46),v=O(l);function O(a){return a&&a.__esModule?a:{default:a}}s(32),s(467),s(34),s(268);var y={valueNames:["id","text","timestamp","fromNow","time","tags","pinned"],item:`<li class="col-xs-12 col-sm-6 col-md-6 col-lg-4">
          <span class="id" style="display:none;"></span>
          <a href="#">
            <div class="item">
              <div class="ui-history-pin fa fa-thumb-tack fa-fw"></div>
              <div class="ui-history-close fa fa-close fa-fw" data-toggle="modal" data-target=".delete-history-modal"></div>
              <div class="content">
                <h4 class="text"></h4>
                <p>
                  <i><i class="fa fa-clock-o"></i> visited </i><i class="fromNow"></i>
                  <br>
                  <i class="timestamp" style="display:none;"></i>
                  <i class="time"></i>
                </p>
                <p class="tags"></p>
              </div>
            </div>
          </a>
        </li>`,page:18,pagination:[{outerWindow:1}]},u=new n.default("history",y);window.migrateHistoryFromTempCallback=I,(0,m.setloginStateChangeEvent)(I),I();function I(){(0,m.checkIfAuth)(function(a){e(".ui-signin").hide(),e(".ui-or").hide(),e(".ui-welcome").show(),a.photo?e(".ui-avatar").prop("src",a.photo).show():e(".ui-avatar").prop("src","").hide(),e(".ui-name").html(a.name),e(".ui-signout").show(),e(".ui-history").click(),(0,d.parseServerToHistory)(u,T)},function(){e(".ui-signin").show(),e(".ui-or").show(),e(".ui-welcome").hide(),e(".ui-avatar").prop("src","").hide(),e(".ui-name").html(""),e(".ui-signout").hide(),(0,d.parseStorageToHistory)(u,T)})}e(".masthead-nav li").click(function(){e(this).siblings().removeClass("active"),e(this).addClass("active")}),e('a[href="#"]').click(function(a){a.preventDefault()}),e(".ui-home").click(function(a){e("#home").is(":visible")||(e(".section:visible").hide(),e("#home").fadeIn())}),e(".ui-history").click(function(){e("#history").is(":visible")||(e(".section:visible").hide(),e("#history").fadeIn())});function w(){e("#history-list").children().length>0?(e(".pagination").show(),e(".ui-nohistory").hide(),e(".ui-import-from-browser").hide()):e("#history-list").children().length===0&&(e(".pagination").hide(),e(".ui-nohistory").slideDown(),(0,d.getStorageHistory)(function(a){a&&a.length>0&&(0,m.getLoginState)()&&u.items.length===0&&e(".ui-import-from-browser").slideDown()}))}function T(a,c){w(),a.sort("",{sortFunction:function(F,U){var x=F.values(),r=U.values();return x.pinned&&!r.pinned?-1:!x.pinned&&r.pinned?1:x.timestamp>r.timestamp?-1:x.timestamp<r.timestamp?1:0}});for(var p=[],H=0,L=a.items.length;H<L;H++){var S=a.items[H]._values.tags;if(S&&S.length>0)for(var k=0;k<S.length;k++){var C=!1;p.includes(S[k])&&(C=!0),C||p.push(S[k])}}V(p)}u.on("updated",function(a){for(var c=0,p=a.items.length;c<p;c++){var H=a.items[c];if(H.visible()){var L=e(H.elm),S=H._values,k=L.find("a"),C=L.find(".ui-history-pin"),z=L.find(".tags");k.attr("href",serverurl+"/"+S.id),S.pinned?C.addClass("active"):C.removeClass("active");var F=S.tags;if(F&&F.length>0&&z.children().length<=0){for(var U=[],x=0;x<F.length;x++)U.push("<span class='label label-default'>"+F[x]+"</span>");z.html(U.join(" "))}}}e(".ui-history-close").off("click"),e(".ui-history-close").on("click",E),e(".ui-history-pin").off("click"),e(".ui-history-pin").on("click",J)});function E(a){a.preventDefault();var c=e(this).closest("a").siblings("span").html(),p=u.get("id",c)[0]._values;e(".ui-delete-history-modal-msg").text("Do you really want to delete below history?"),e(".ui-delete-history-modal-item").html('<i class="fa fa-file-text"></i> '+p.text+'<br><i class="fa fa-clock-o"></i> '+p.time),B=!1,Y=c}function J(a){a.preventDefault();var c=e(this),p=c.closest("a").siblings("span").html(),H=u.get("id",p)[0],L=H._values,S=L.pinned;L.pinned?(S=!1,H._values.pinned=!1):(S=!0,H._values.pinned=!0),(0,m.checkIfAuth)(function(){(0,d.postHistoryToServer)(p,{pinned:S},function(k,C){k||(S?c.addClass("active"):c.removeClass("active"))})},function(){(0,d.getHistory)(function(k){for(var C=0;C<k.length;C++)if(k[C].id===p){k[C].pinned=S;break}(0,d.saveHistory)(k),S?c.addClass("active"):c.removeClass("active")})})}setInterval(R,6e4);function R(){for(var a=e(".item").toArray(),c=0;c<a.length;c++){var p=e(a[c]),H=parseInt(p.find(".timestamp").text());p.find(".fromNow").text(g(H).fromNow())}}var B=!1,Y=null;function W(){(0,m.checkIfAuth)(function(){(0,d.deleteServerHistory)(Y,function(a,c){a||(B?(u.clear(),w()):(u.remove("id",Y),w())),e(".delete-history-modal").modal("hide"),Y=null,B=!1})},function(){if(B)(0,d.saveHistory)([]),u.clear(),w(),Y=null;else{if(!Y)return;(0,d.getHistory)(function(a){var c=(0,d.removeHistory)(Y,a);(0,d.saveHistory)(c),u.remove("id",Y),w(),Y=null})}e(".delete-history-modal").modal("hide"),B=!1})}e(".ui-delete-history-modal-confirm").click(function(){W()}),e(".ui-import-from-browser").click(function(){(0,d.saveStorageHistoryToServer)(function(){(0,d.parseStorageToHistory)(u,T)})}),e(".ui-save-history").click(function(){(0,d.getHistory)(function(a){var c=(0,h.default)(a),p=new Blob([c],{type:"application/json;charset=utf-8"});(0,P.saveAs)(p,"hedgedoc_history_"+g().format("YYYYMMDDHHmmss"),!0)})}),e(".ui-open-history").bind("change",function(a){var c=a.target.files||a.dataTransfer.files,p=c[0],H=new FileReader;H.onload=function(){var L=JSON.parse(H.result);H.result&&((0,d.getHistory)(function(S){var k=S.concat(L);k=(0,d.clearDuplicatedHistory)(k),(0,d.saveHistory)(k),(0,d.parseHistory)(u,T)}),e(".ui-open-history").replaceWith(e(".ui-open-history").val("").clone(!0)))},H.readAsText(p)}),e(".ui-clear-history").click(function(){e(".ui-delete-history-modal-msg").text("Do you really want to clear all history?"),e(".ui-delete-history-modal-item").html("There is no turning back."),B=!0,Y=null}),e(".ui-refresh-history").click(function(){var a=e(".ui-use-tags").select2("val");e(".ui-use-tags").select2("val",""),u.filter();var c=e(".search").val();e(".search").val(""),u.search(),e("#history-list").slideUp("fast"),e(".pagination").hide(),(0,m.resetCheckAuth)(),u.clear(),(0,d.parseHistory)(u,function(p,H){T(p,H),e(".ui-use-tags").select2("val",a),e(".ui-use-tags").trigger("change"),u.search(c),e(".search").val(c),w(),e("#history-list").slideDown("fast")})}),e(".ui-delete-user-modal-cancel").click(function(){e(".ui-delete-user").parent().removeClass("active")}),e(".ui-logout").click(function(){(0,m.clearLoginState)(),location.href=serverurl+"/logout"});var K=[];e(".ui-use-tags").select2({placeholder:e(".ui-use-tags").attr("placeholder"),multiple:!0,data:function(){return{results:K}}}),e(".select2-input").css("width","inherit"),V([]);function V(a){for(var c=0;c<a.length;c++)a[c]={id:c,text:(0,v.default)(a[c]).unescapeHTML().s};K=a}e(".ui-use-tags").on("change",function(){for(var a=[],c=e(this).select2("data"),p=0;p<c.length;p++)a.push(c[p].text);a.length>0?u.filter(function(H){var L=H.values();if(!L.tags)return!1;for(var S=!1,k=0;k<a.length;k++)if(L.tags.includes(a[k])){S=!0;break}return S}):u.filter(),w()}),e(".search").keyup(function(){w()}),e(".signin-modal").on("shown.bs.modal",function(){var a=e("input[name=username]"),c=e("input[name=email]"),p=e("input[name=openid_identifier]");a.length===1?a.focus():c.length===1?c.focus():p.length===1&&p.focus()})}).call(this,s(3),s(17))},467:function(D,o,s){"use strict";s.r(o)},688:function(D,o,s){s(231),D.exports=s(454)}});

//# sourceMappingURL=cover.c4a79926a5ed549e6b1a.js.map