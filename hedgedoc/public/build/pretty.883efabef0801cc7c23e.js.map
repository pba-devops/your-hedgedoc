{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"moment\"","webpack:///./public/js/lib/common/login.js","webpack:///./public/js/lib/config/index.js","webpack:///./public/js/reveal-markdown-exposed.js","webpack:///./public/js/reveal-markdown.js","webpack:///./public/vendor/md-toc.js","webpack:///./public/css/extra.css?2257","webpack:///./public/css/slide-preview.css?e2a7","webpack:///./node_modules/core-js/library/fn/json/stringify.js","webpack:///./public/js/extra.js","webpack:///./public/js/render.js","webpack:///./node_modules/markdown-it-imsize/lib/imsize/types sync ^\\.\\/.*$","webpack:///./node_modules/highlight.js/styles/github-gist.css?9714","webpack:///external \"$\"","webpack:///./public/js/locale.js","webpack:///./public/css/site.css?cc32","webpack:///./node_modules/babel-runtime/core-js/json/stringify.js","webpack:///./public/js/lib/editor/ui-elements.js","webpack:///./public/js/pretty.js"],"names":["webpackJsonpCallback","data","chunkIds","moreModules","executeModules","moduleId","chunkId","i","resolves","installedChunks","modules","parentJsonpFunction","deferredModules","checkDeferredModules","result","deferredModule","fulfilled","j","depId","__webpack_require__","installedModules","jsonpScriptSrc","module","promises","installedChunkData","promise","resolve","reject","script","onScriptComplete","error","event","timeout","chunk","errorType","realSrc","exports","name","getter","value","mode","ns","key","object","property","err","jsonpArray","oldJsonpFunction","setloginStateChangeEvent","resetCheckAuth","setLoginState","checkLoginStateChanged","getLoginState","getUserId","clearLoginState","checkIfAuth","checkAuth","profile","lastLoginState","lastUserId","loginStateChangeEvent","func","bool","id","Cookies","set","expires","sameSite","window","cookiePolicy","secure","location","protocol","remove","setTimeout","state","get","yesCallback","noCallback","cookieLoginState","$","serverurl","done","status","fail","always","DROPBOX_APP_KEY","domain","urlpath","debug","port","hostname","noteid","decodeURIComponent","pathname","slice","length","split","noteurl","version","___EXPOSE_LOADER_IMPORT___","___EXPOSE_LOADER_GET_GLOBAL_THIS___","___EXPOSE_LOADER_GLOBAL_THIS___","root","factory","RevealMarkdown","initialize","DEFAULT_SLIDE_SEPARATOR","DEFAULT_NOTES_SEPARATOR","DEFAULT_ELEMENT_ATTRIBUTES_SEPARATOR","DEFAULT_SLIDE_ATTRIBUTES_SEPARATOR","SCRIPT_END_PLACEHOLDER","getMarkdownFromSlide","section","template","querySelector","text","textContent","replace","RegExp","leadingWs","match","leadingTabs","getForwardedAttributes","attributes","len","test","push","join","getSlidifyOptions","options","separator","notesSeparator","createMarkdownSlide","content","notesMatch","trim","slidify","markdown","separatorRegex","verticalSeparator","horizontalSeparatorRegex","matches","lastIndex","isHorizontal","wasHorizontal","sectionStack","exec","substring","index","markdownSections","Array","forEach","child","processSlides","sections","document","querySelectorAll","getAttribute","xhr","XMLHttpRequest","url","datacharset","overrideMimeType","onreadystatechange","readyState","outerHTML","responseText","open","send","e","alert","innerHTML","addAttributeInElement","node","elementTarget","mardownClassesInElementsRegex","mardownClassRegex","nodeValue","matchesClass","classes","substr","whiteListAttr","indexOf","setAttribute","addAttributes","element","previousElement","separatorElementAttributes","separatorSectionAttributes","childNodes","undefined","previousParentElement","childElement","aPreviousChildElement","tagName","parentSection","nodeName","nodeType","Node","COMMENT_NODE","convertSlides","notes","rendered","md","render","postProcess","parentNode","appendChild","Toc","recursiveToc","level","titleElements","titleNames","ulClass","iterTag","recurse","openTag","elementTag","elementTitle","elementText","self","t","core","$JSON","it","updateLastChange","updateLastChangeUser","updateOwner","renderTitle","renderFilename","renderTags","isValidURL","parseMeta","finishView","removeDOMEvents","exportToRawHTML","exportToHTML","generateToc","smoothHashScroll","autoLinkify","deduplicatedHeaderId","renderTOC","scrollToHash","require","ui","createtime","lastchangetime","lastchangeui","statusChanged","statusCreated","time","user","nouser","ownerui","hide","show","html","moment","fromNow","attr","format","setInterval","lastchangeuser","lastchangeuserprofile","icon","children","tooltip","photo","owner","ownerprofile","styleString","getTitle","view","title","meta","h1s","find","first","filename","tags","rawtags","metaTags","each","codes","found","slugifyWithUTF8","newText","stripTags","s","str","URL","includes","edit","toc","tocAffix","lang","dir","breaks","removeAttr","viewAjaxCallback","spaceregex","notinhtmltagregex","coloregex","source","nameregex","timeregex","nameandtimeregex","replaceExtraTags","lis","removeClass","sortByDepth","toArray","li","clone","p","disabled","editor","havePermission","toLowerCase","parentElement","change","toggleTodoEvent","tagColor","closest","addClass","css","click","imgPlayiframe","vimeoLink","ajax","type","encodeURIComponent","jsonp","dataType","success","image","thumbnail_url","prepend","gist","sequences","$value","$ele","parent","sequence","sequenceDiagram","theme","unwrap","svg","append","console","warn","flow","chart","flowchart","parse","drawSVG","fill","graphvizs","Viz","graphviz","Error","mermaids","mermaid","default","startOnLoad","mermaidAPI","init","errormessage","abcs","abcjs","renderAbc","images","onload","blockquote","blockquoteP","blockquoteColor","$html","iframe","caption","inner","height","width","ratio","PDFObject","embed","langDiv","reallang","className","codeDiv","code","unescapeHTML","Prism","highlight","languages","wiki","makefile","hljs","listLanguages","highlightAuto","mathjaxdivs","MathJax","Hub","Queue","linkTag","currentLocation","hash","href","toString","linenumberdivs","hasClass","startnumber","parseInt","last","metaError","warning","domevents","concat","filter","elem","pos","l","toDataURL","callback","fetch","then","response","fr","FileReader","blob","readAsDataURL","generateCleanHTML","src","eles","dataURL","style","area","Blob","fn","ar","map","parents","elt","sort","a","b","startline","line","getLine","checked","replacements","replaceRange","ch","removeHash","history","pushState","search","tocExpand","checkExpandToggle","toggle","target","top","class","targetId","process","getHeaderContent","tocMenu","backtotop","gotobottom","preventDefault","stopPropagation","scrollToTop","scrollToBottom","hashElements","$element","on","$hash","stop","animate","scrollTop","offset","anchorForId","anchor","createElement","ariaHidden","createHeaderId","headerContent","headerIds","slug","linkifyHeaderStyle","idBase","has","add","linkifyAnchors","containingElement","headers","getElementsByTagName","header","getElementsByClassName","insertBefore","firstChild","contentBlock","headerHTML","changeHeaderId","$header","newId","$headerLink","allHeaders","duplicatedHeaders","tocs","TOC","replaceWith","highlightRender","escapeHTML","showlinenumbers","lines","linenumbers","continuelinenumber","linegutter","langPrefix","linkify","typographer","use","beforeMath","afterMath","beforeInlineMath","afterInlineMath","beforeDisplayMath","afterDisplayMath","shortcuts","emojify","setConfig","blacklist","elements","img_dir","ignore_emoticons","renderer","rules","emoji","token","idx","markup","renderContainer","tokens","env","attrJoin","info","renderToken","arguments","markdownitContainer","defaultImageRender","list_item_open","blockquote_open","heading_open","fence","utils","unescapeAll","langName","highlighted","escapeHtml","renderAttrs","youtubePlugin","Plugin","videoid","div","thumbnailSrc","vimeoPlugin","gistPlugin","gistid","tocPlugin","slidesharePlugin","slideshareid","speakerdeckPlugin","speakerdeckid","pdfPlugin","pdfurl","emojijsPlugin","emojiNames","item","bMarks","max","eMarks","start","end","silent","blkIndent","tShift","jsyaml","safeLoad","metaPlugin","block","ruler","before","alt","filterXSS","linkRegex","dataUriRegex","whiteList","ol","kbd","summary","ruby","rp","rt","figure","figcaption","filterXSSOptions","allowCommentTag","onIgnoreTag","tag","onTagAttr","isWhiteAttr","escapeAttrValue","onIgnoreTagAttr","preventXSS","webpackContext","req","webpackContextResolve","supportedLanguages","detectLang","userLang","navigator","language","userLanguage","userLangCode","supportedLanguagesList","localeSelector","isoCode","nativeName","val","reload","locale","getUIElements","spinner","toolbar","shortStatus","new","publish","extra","revision","slide","download","rawhtml","export","dropbox","snippet","import","clipboard","both","night","infobar","lastchange","nolastchangeuser","permission","label","freely","editable","locked","private","limited","protected","delete","affix","dropdown","codemirror","codemirrorScroll","codemirrorSizer","codemirrorSizerInner","resize","handle","syncToggle","modal","snippetImportProjects","snippetImportSnippets","lastMeta","slideOptions","slides","refreshView","body","tocDropdown","enoughForAffixToc","generateScrollspy","scrollspy","scroll","windowResize","paddingRight","parseFloat","right","left","outerWidth","newbool","rightMargin","affixLeftMargin","ready","scrollHeight"],"mappings":"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","file":"pretty.883efabef0801cc7c23e.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t14: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + ({}[chunkId]||chunkId) + \".\" + {\"25\":\"e2082ba77f9d9990c226\",\"26\":\"f657c4d1bc56190f4534\",\"27\":\"2792b42e05cef7143688\",\"28\":\"628b83211697ecb642ff\",\"29\":\"f619f2fb07a8928c6f8c\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"build/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([1082,0,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = moment;","/* global Cookies */\n\nimport { serverurl } from '../config'\n\nlet checkAuth = false\nlet profile = null\nlet lastLoginState = getLoginState()\nlet lastUserId = getUserId()\nlet loginStateChangeEvent = null\n\nexport function setloginStateChangeEvent (func) {\n  loginStateChangeEvent = func\n}\n\nexport function resetCheckAuth () {\n  checkAuth = false\n}\n\nexport function setLoginState (bool, id) {\n  Cookies.set('loginstate', bool, {\n    expires: 365,\n    sameSite: window.cookiePolicy,\n    secure: window.location.protocol === 'https:'\n  })\n  if (id) {\n    Cookies.set('userid', id, {\n      expires: 365,\n      sameSite: window.cookiePolicy,\n      secure: window.location.protocol === 'https:'\n    })\n  } else {\n    Cookies.remove('userid', {\n      sameSite: window.cookiePolicy,\n      secure: window.location.protocol === 'https:'\n    })\n  }\n  lastLoginState = bool\n  lastUserId = id\n  checkLoginStateChanged()\n}\n\nexport function checkLoginStateChanged () {\n  if (getLoginState() !== lastLoginState || getUserId() !== lastUserId) {\n    if (loginStateChangeEvent) setTimeout(loginStateChangeEvent, 100)\n    return true\n  } else {\n    return false\n  }\n}\n\nexport function getLoginState () {\n  const state = Cookies.get('loginstate')\n  return state === 'true' || state === true\n}\n\nexport function getUserId () {\n  return Cookies.get('userid')\n}\n\nexport function clearLoginState () {\n  Cookies.remove('loginstate')\n}\n\nexport function checkIfAuth (yesCallback, noCallback) {\n  const cookieLoginState = getLoginState()\n  if (checkLoginStateChanged()) checkAuth = false\n  if (!checkAuth || typeof cookieLoginState === 'undefined') {\n    $.get(`${serverurl}/me`)\n      .done(data => {\n        if (data && data.status === 'ok') {\n          profile = data\n          yesCallback(profile)\n          setLoginState(true, data.id)\n        } else {\n          noCallback()\n          setLoginState(false)\n        }\n      })\n      .fail(() => {\n        noCallback()\n      })\n      .always(() => {\n        checkAuth = true\n      })\n  } else if (cookieLoginState) {\n    yesCallback(profile)\n  } else {\n    noCallback()\n  }\n}\n\nexport default {\n  checkAuth,\n  profile,\n  lastLoginState,\n  lastUserId,\n  loginStateChangeEvent\n}\n","export const DROPBOX_APP_KEY = window.DROPBOX_APP_KEY || ''\n\nexport const domain = window.domain || '' // domain name\nexport const urlpath = window.urlpath || '' // sub url path, like: www.example.com/<urlpath>\nexport const debug = window.debug || false\n\nexport const port = window.location.port\nexport const serverurl = `${window.location.protocol}//${domain || window.location.hostname}${port ? ':' + port : ''}${urlpath ? '/' + urlpath : ''}`\nwindow.serverurl = serverurl\nexport const noteid = decodeURIComponent(urlpath ? window.location.pathname.slice(urlpath.length + 1, window.location.pathname.length).split('/')[1] : window.location.pathname.split('/')[1])\nexport const noteurl = `${serverurl}/${noteid}`\n\nexport const version = window.version\n","var ___EXPOSE_LOADER_IMPORT___ = require(\"-!../../node_modules/babel-loader/lib/index.js!./reveal-markdown.js\");\nvar ___EXPOSE_LOADER_GET_GLOBAL_THIS___ = require(\"../../node_modules/expose-loader/dist/runtime/getGlobalThis.js\");\nvar ___EXPOSE_LOADER_GLOBAL_THIS___ = ___EXPOSE_LOADER_GET_GLOBAL_THIS___;\nif (typeof ___EXPOSE_LOADER_GLOBAL_THIS___[\"RevealMarkdown\"] === 'undefined') ___EXPOSE_LOADER_GLOBAL_THIS___[\"RevealMarkdown\"] = ___EXPOSE_LOADER_IMPORT___;\nmodule.exports = ___EXPOSE_LOADER_IMPORT___;\n","import { preventXSS, escapeAttrValue } from './render'\nimport { md } from './extra'\n\n/**\n * The reveal.js markdown plugin. Handles parsing of\n * markdown inside of presentations as well as loading\n * of external markdown documents.\n */\n(function (root, factory) {\n  if (typeof exports === 'object') {\n    module.exports = factory()\n  } else {\n    // Browser globals (root is window)\n    root.RevealMarkdown = factory()\n    root.RevealMarkdown.initialize()\n  }\n}(this, function () {\n  const DEFAULT_SLIDE_SEPARATOR = '^\\r?\\n---\\r?\\n$'\n  const DEFAULT_NOTES_SEPARATOR = '^note:'\n  const DEFAULT_ELEMENT_ATTRIBUTES_SEPARATOR = '\\\\.element\\\\s*?(.+?)$'\n  const DEFAULT_SLIDE_ATTRIBUTES_SEPARATOR = '\\\\.slide:\\\\s*?(\\\\S.+?)$'\n\n  const SCRIPT_END_PLACEHOLDER = '__SCRIPT_END__'\n\n  /**\n   * Retrieves the markdown contents of a slide section\n   * element. Normalizes leading tabs/whitespace.\n   */\n  function getMarkdownFromSlide (section) {\n    const template = section.querySelector('script')\n\n    // strip leading whitespace so it isn't evaluated as code\n    let text = (template || section).textContent\n\n    // restore script end tags\n    text = text.replace(new RegExp(SCRIPT_END_PLACEHOLDER, 'g'), '</script>')\n\n    const leadingWs = text.match(/^\\n?(\\s*)/)[1].length\n    const leadingTabs = text.match(/^\\n?(\\t*)/)[1].length\n\n    if (leadingTabs > 0) {\n      text = text.replace(new RegExp('\\\\n?\\\\t{' + leadingTabs + '}', 'g'), '\\n')\n    } else if (leadingWs > 1) {\n      text = text.replace(new RegExp('\\\\n? {' + leadingWs + '}', 'g'), '\\n')\n    }\n\n    return text\n  }\n\n  /**\n   * Given a markdown slide section element, this will\n   * return all arguments that aren't related to markdown\n   * parsing. Used to forward any other user-defined arguments\n   * to the output markdown slide.\n   */\n  function getForwardedAttributes (section) {\n    const attributes = section.attributes\n    const result = []\n\n    for (let i = 0, len = attributes.length; i < len; i++) {\n      const name = attributes[i].name\n      const value = attributes[i].value\n\n      // disregard attributes that are used for markdown loading/parsing\n      if (/data-(markdown|separator|vertical|notes)/gi.test(name)) continue\n\n      if (value) {\n        result.push(name + '=\"' + value + '\"')\n      } else {\n        result.push(name)\n      }\n    }\n\n    return result.join(' ')\n  }\n\n  /**\n   * Inspects the given options and fills out default\n   * values for what's not defined.\n   */\n  function getSlidifyOptions (options) {\n    options = options || {}\n    options.separator = options.separator || DEFAULT_SLIDE_SEPARATOR\n    options.notesSeparator = options.notesSeparator || DEFAULT_NOTES_SEPARATOR\n    options.attributes = options.attributes || ''\n\n    return options\n  }\n\n  /**\n   * Helper function for constructing a markdown slide.\n   */\n  function createMarkdownSlide (content, options) {\n    options = getSlidifyOptions(options)\n\n    const notesMatch = content.split(new RegExp(options.notesSeparator, 'mgi'))\n\n    if (notesMatch.length === 2) {\n      content = notesMatch[0] + '<aside class=\"notes\" data-markdown>' + notesMatch[1].trim() + '</aside>'\n    }\n\n    // prevent script end tags in the content from interfering\n    // with parsing\n    content = content.replace(/<\\/script>/gi, SCRIPT_END_PLACEHOLDER)\n\n    return '<script type=\"text/template\">' + content + '</script>'\n  }\n\n  /**\n   * Parses a data string into multiple slides based\n   * on the passed in separator arguments.\n   */\n  function slidify (markdown, options) {\n    options = getSlidifyOptions(options)\n\n    const separatorRegex = new RegExp(options.separator + (options.verticalSeparator ? '|' + options.verticalSeparator : ''), 'mg')\n    const horizontalSeparatorRegex = new RegExp(options.separator)\n\n    let matches\n    let lastIndex = 0\n    let isHorizontal\n    let wasHorizontal = true\n    let content\n    const sectionStack = []\n\n    // iterate until all blocks between separators are stacked up\n    while ((matches = separatorRegex.exec(markdown)) !== null) {\n      // determine direction (horizontal by default)\n      isHorizontal = horizontalSeparatorRegex.test(matches[0])\n\n      if (!isHorizontal && wasHorizontal) {\n        // create vertical stack\n        sectionStack.push([])\n      }\n\n      // pluck slide content from markdown input\n      content = markdown.substring(lastIndex, matches.index)\n\n      if (isHorizontal && wasHorizontal) {\n        // add to horizontal stack\n        sectionStack.push(content)\n      } else {\n        // add to vertical stack\n        sectionStack[sectionStack.length - 1].push(content)\n      }\n\n      lastIndex = separatorRegex.lastIndex\n      wasHorizontal = isHorizontal\n    }\n\n    // add the remaining slide\n    (wasHorizontal ? sectionStack : sectionStack[sectionStack.length - 1]).push(markdown.substring(lastIndex))\n\n    let markdownSections = ''\n\n    // flatten the hierarchical stack, and insert <section data-markdown> tags\n    for (let i = 0, len = sectionStack.length; i < len; i++) {\n      // vertical\n      if (sectionStack[i] instanceof Array) {\n        markdownSections += '<section ' + options.attributes + '>'\n\n        sectionStack[i].forEach(function (child) {\n          markdownSections += '<section data-markdown>' + createMarkdownSlide(child, options) + '</section>'\n        })\n\n        markdownSections += '</section>'\n      } else {\n        markdownSections += '<section ' + options.attributes + ' data-markdown>' + createMarkdownSlide(sectionStack[i], options) + '</section>'\n      }\n    }\n\n    return markdownSections\n  }\n\n  /**\n   * Parses any current data-markdown slides, splits\n   * multi-slide markdown into separate sections and\n   * handles loading of external markdown.\n   */\n  function processSlides () {\n    const sections = document.querySelectorAll('[data-markdown]')\n    let section\n\n    for (let i = 0, len = sections.length; i < len; i++) {\n      section = sections[i]\n\n      if (section.getAttribute('data-markdown').length) {\n        const xhr = new XMLHttpRequest()\n        const url = section.getAttribute('data-markdown')\n\n        const datacharset = section.getAttribute('data-charset')\n\n        // see https://developer.mozilla.org/en-US/docs/Web/API/element.getAttribute#Notes\n        if (datacharset !== null && datacharset !== '') {\n          xhr.overrideMimeType('text/html; charset=' + datacharset)\n        }\n\n        xhr.onreadystatechange = function () {\n          if (xhr.readyState === 4) {\n            // file protocol yields status code 0 (useful for local debug, mobile applications etc.)\n            if ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 0) {\n              section.outerHTML = slidify(xhr.responseText, {\n                separator: section.getAttribute('data-separator'),\n                verticalSeparator: section.getAttribute('data-separator-vertical'),\n                notesSeparator: section.getAttribute('data-separator-notes'),\n                attributes: getForwardedAttributes(section)\n              })\n            } else {\n              section.outerHTML = '<section data-state=\"alert\">' +\n              'ERROR: The attempt to fetch ' + url + ' failed with HTTP status ' + xhr.status + '.' +\n              'Check your browser\\'s JavaScript console for more details.' +\n              '<p>Remember that you need to serve the presentation HTML from a HTTP server.</p>' +\n              '</section>'\n            }\n          }\n        }\n\n        xhr.open('GET', url, false)\n\n        try {\n          xhr.send()\n        } catch (e) {\n          alert('Failed to get the Markdown file ' + url + '. Make sure that the presentation and the file are served by a HTTP server and the file can be found there. ' + e)\n        }\n      } else if (section.getAttribute('data-separator') || section.getAttribute('data-separator-vertical') || section.getAttribute('data-separator-notes')) {\n        section.outerHTML = slidify(getMarkdownFromSlide(section), {\n          separator: section.getAttribute('data-separator'),\n          verticalSeparator: section.getAttribute('data-separator-vertical'),\n          notesSeparator: section.getAttribute('data-separator-notes'),\n          attributes: getForwardedAttributes(section)\n        })\n      } else {\n        section.innerHTML = createMarkdownSlide(getMarkdownFromSlide(section))\n      }\n    }\n  }\n\n  /**\n   * Check if a node value has the attributes pattern.\n   * If yes, extract it and add that value as one or several attributes\n   * the the terget element.\n   *\n   * You need Cache Killer on Chrome to see the effect on any FOM transformation\n   * directly on refresh (F5)\n   * http://stackoverflow.com/questions/5690269/disabling-chrome-cache-for-website-development/7000899#answer-11786277\n   */\n  function addAttributeInElement (node, elementTarget, separator) {\n    const mardownClassesInElementsRegex = new RegExp(separator, 'mg')\n    const mardownClassRegex = /([^\"= ]+?)=\"([^\"=]+?)\"/mg\n    let nodeValue = node.nodeValue\n    let matches\n    let matchesClass\n    if ((matches = mardownClassesInElementsRegex.exec(nodeValue))) {\n      const classes = matches[1]\n      nodeValue = nodeValue.substring(0, matches.index) + nodeValue.substring(mardownClassesInElementsRegex.lastIndex)\n      node.nodeValue = nodeValue\n      while ((matchesClass = mardownClassRegex.exec(classes))) {\n        const name = matchesClass[1]\n        const value = matchesClass[2]\n        if (name.substr(0, 5) === 'data-' || window.whiteListAttr.indexOf(name) !== -1) { elementTarget.setAttribute(name, escapeAttrValue(value)) }\n      }\n      return true\n    }\n    return false\n  }\n\n  /**\n   * Add attributes to the parent element of a text node,\n   * or the element of an attribute node.\n   */\n  function addAttributes (section, element, previousElement, separatorElementAttributes, separatorSectionAttributes) {\n    if (element != null && element.childNodes !== undefined && element.childNodes.length > 0) {\n      let previousParentElement = element\n      for (let i = 0; i < element.childNodes.length; i++) {\n        const childElement = element.childNodes[i]\n        if (i > 0) {\n          let j = i - 1\n          while (j >= 0) {\n            const aPreviousChildElement = element.childNodes[j]\n            if (typeof aPreviousChildElement.setAttribute === 'function' && aPreviousChildElement.tagName !== 'BR') {\n              previousParentElement = aPreviousChildElement\n              break\n            }\n            j = j - 1\n          }\n        }\n        let parentSection = section\n        if (childElement.nodeName === 'section') {\n          parentSection = childElement\n          previousParentElement = childElement\n        }\n        if (typeof childElement.setAttribute === 'function' || childElement.nodeType === Node.COMMENT_NODE) {\n          addAttributes(parentSection, childElement, previousParentElement, separatorElementAttributes, separatorSectionAttributes)\n        }\n      }\n    }\n\n    if (element.nodeType === Node.COMMENT_NODE) {\n      if (addAttributeInElement(element, previousElement, separatorElementAttributes) === false) {\n        addAttributeInElement(element, section, separatorSectionAttributes)\n      }\n    }\n  }\n\n  /**\n   * Converts any current data-markdown slides in the\n   * DOM to HTML.\n   */\n  function convertSlides () {\n    const sections = document.querySelectorAll('[data-markdown]')\n\n    for (let i = 0, len = sections.length; i < len; i++) {\n      const section = sections[i]\n\n      // Only parse the same slide once\n      if (!section.getAttribute('data-markdown-parsed')) {\n        section.setAttribute('data-markdown-parsed', true)\n\n        const notes = section.querySelector('aside.notes')\n        let markdown = getMarkdownFromSlide(section)\n        markdown = markdown.replace(/&lt;/g, '<').replace(/&gt;/g, '>')\n        let rendered = md.render(markdown)\n        rendered = preventXSS(rendered)\n        const result = window.postProcess(rendered)\n        section.innerHTML = result[0].outerHTML\n        addAttributes(section, section, null, section.getAttribute('data-element-attributes') ||\n        section.parentNode.getAttribute('data-element-attributes') ||\n        DEFAULT_ELEMENT_ATTRIBUTES_SEPARATOR,\n        section.getAttribute('data-attributes') ||\n        section.parentNode.getAttribute('data-attributes') ||\n        DEFAULT_SLIDE_ATTRIBUTES_SEPARATOR)\n\n        // If there were notes, we need to re-add them after\n        // having overwritten the section's HTML\n        if (notes) {\n          section.appendChild(notes)\n        }\n      }\n    }\n  }\n\n  // API\n  return {\n    initialize: function () {\n      processSlides()\n      convertSlides()\n    },\n    // TODO: Do these belong in the API?\n    processSlides,\n    convertSlides,\n    slidify\n  }\n}))\n","/**\n * md-toc.js v1.0.2\n * https://github.com/yijian166/md-toc.js\n */\n\n(function (window) {\n  function Toc (id, options) {\n    this.el = document.getElementById(id)\n    if (!this.el) return\n    this.options = options || {}\n    this.tocLevel = parseInt(options.level) || 0\n    this.tocClass = options['class'] || 'toc'\n    this.ulClass = options['ulClass']\n    this.tocTop = parseInt(options.top) || 0\n    this.elChilds = this.el.children\n    this.process = options['process']\n    if (!this.elChilds.length) return\n    this._init()\n  }\n\n  Toc.prototype._init = function () {\n    this._collectTitleElements()\n    this._createTocContent()\n    this._showToc()\n  }\n\n  Toc.prototype._collectTitleElements = function () {\n    this._elTitlesNames = []\n    this.elTitleElements = []\n    for (var i = 1; i < 6; i++) {\n      if (this.el.getElementsByTagName('h' + i).length) {\n        this._elTitlesNames.push('h' + i)\n      }\n    }\n\n    this._elTitlesNames.length = this._elTitlesNames.length > this.tocLevel ? this.tocLevel : this._elTitlesNames.length\n\n    for (var j = 0; j < this.elChilds.length; j++) {\n      this._elChildName = this.elChilds[j].tagName.toLowerCase()\n      if (this._elTitlesNames.toString().match(this._elChildName)) {\n        this.elTitleElements.push(this.elChilds[j])\n      }\n    }\n  }\n\n  Toc.prototype._createTocContent = function recursiveToc(level = 0, titleElements = [], titleNames = [], ulClass = undefined, index = 0) {\n    // Inititalize our elements from the toc object\n    // which is only available on level 0\n    if (level === 0) {\n      titleElements = this.elTitleElements\n      titleNames = this._elTitlesNames\n      ulClass = this.ulClass\n    }\n    // No need to do anything for an empty ToC\n    if (!titleElements.length) return\n\n    var content = '<ul'\n    if (ulClass) {\n      content += ' class=\"' + ulClass + '\"'\n    }\n    content += '>\\n'\n    var iterTag = titleNames[level]\n    var recurse = false\n    var openTag = false\n\n    for (var element; element = titleElements.shift();) {\n      var elementTag = element.tagName.toLowerCase()\n\n      // We only care about tags on our level to add them as list item\n      if (elementTag == iterTag) {\n        // Let's do some cleaning\n        var elementTitle = element.textContent.replace(/\"/g, '&quot;')\n        var elementText = (typeof this.process === 'function' ? this.process(element) : element.innerHTML).replace(/<(?:.|\\n)*?>/gm, '')\n        var id = element.getAttribute('id')\n        if (!id) {\n          element.setAttribute('id', 'tip' + ++index)\n          id = '#tip' + index\n        } else {\n          id = '#' + id\n        }\n        if (openTag) {\n          content += '</li>\\n'\n          openTag = false\n        }\n        content += '<li><a href=\"' + id + '\" title=\"'+ elementTitle +'\">' + elementText + '</a>'\n        // Reset recursion. We need it for the next subsections\n        recurse = false\n        openTag = true\n      // Check if the current element has a lower level than ours, if so, we have to go down the rabbithole!\n      } else if (!recurse && titleNames.indexOf(elementTag.toLowerCase()) > level) {\n        recurse = true\n        if (!openTag) {\n          content += '<li class=\"invisable-node\">'\n          openTag = true\n        }\n        // This element is for the lower lever, we have to re-add it before we send the list down there.\n        titleElements.unshift(element)\n        // Let's call ourself and get to the next level\n        content += recursiveToc(level + 1, titleElements, titleNames, ulClass, index)\n      } else {\n        // When we end up here, met a higher level element\n        // This is not our business so back into the list with the element and let's end this loop\n        titleElements.unshift(element)\n        break\n      }\n    }\n\n    if (openTag) {\n      content += '</li>\\n'\n    }\n    content += '</ul>\\n'\n\n    // Set ToC content of the level 0 everything else pass things to the upper level!\n    if (level === 0) {\n      this.tocContent = content\n    } else {\n      return content\n    }\n  }\n\n  Toc.prototype._showToc = function () {\n    this.toc = document.createElement('div')\n    this.toc.innerHTML = this.tocContent\n    this.toc.setAttribute('class', this.tocClass)\n    if (!this.options.targetId) {\n      this.el.appendChild(this.toc)\n    } else {\n      document.getElementById(this.options.targetId).appendChild(this.toc)\n    }\n    var self = this\n    if (this.tocTop > -1) {\n      window.onscroll = function () {\n        var t = document.documentElement.scrollTop || document.body.scrollTop\n        if (t < self.tocTop) {\n          self.toc.setAttribute('style', 'position:absolute;top:' + self.tocTop + 'px;')\n        } else {\n          self.toc.setAttribute('style', 'position:fixed;top:10px;')\n        }\n      }\n    }\n  }\n  window.Toc = Toc\n})(window)\n","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n","/* eslint no-console: [\"error\", { allow: [\"warn\", \"error\"] }] */\n/* global moment, serverurl */\n\nimport Prism from 'prismjs'\nimport PDFObject from 'pdfobject'\nimport S from 'string'\nimport { saveAs } from 'file-saver'\nimport escapeHTML from 'escape-html'\n\nimport getUIElements from './lib/editor/ui-elements'\n\nimport markdownit from 'markdown-it'\nimport markdownitContainer from 'markdown-it-container'\n\n/* Defined regex markdown it plugins */\nimport Plugin from 'markdown-it-regexp'\n\nimport 'gist-embed'\n\nrequire('prismjs/themes/prism.css')\nrequire('prismjs/components/prism-wiki')\nrequire('prismjs/components/prism-haskell')\nrequire('prismjs/components/prism-go')\nrequire('prismjs/components/prism-typescript')\nrequire('prismjs/components/prism-jsx')\nrequire('prismjs/components/prism-makefile')\nrequire('prismjs/components/prism-gherkin')\n\nrequire('./lib/common/login')\nrequire('./locale')\nrequire('../vendor/md-toc')\nconst ui = getUIElements()\n\n// auto update last change\nwindow.createtime = null\nwindow.lastchangetime = null\nwindow.lastchangeui = {\n  statusChanged: $('.ui-status-lastchange.changed'),\n  statusCreated: $('.ui-status-lastchange.created'),\n  time: $('.ui-lastchange'),\n  user: $('.ui-lastchangeuser'),\n  nouser: $('.ui-no-lastchangeuser')\n}\n\nconst ownerui = $('.ui-owner')\n\nexport function updateLastChange () {\n  if (!window.lastchangeui) return\n  if (window.createtime) {\n    if (window.createtime && !window.lastchangetime) {\n      window.lastchangeui.statusChanged.hide()\n      window.lastchangeui.statusCreated.show()\n    } else {\n      window.lastchangeui.statusChanged.show()\n      window.lastchangeui.statusCreated.hide()\n    }\n    const time = window.lastchangetime || window.createtime\n    window.lastchangeui.time.html(moment(time).fromNow())\n    window.lastchangeui.time.attr('title', moment(time).format('llll'))\n  }\n}\nsetInterval(updateLastChange, 60000)\n\nwindow.lastchangeuser = null\nwindow.lastchangeuserprofile = null\n\nexport function updateLastChangeUser () {\n  if (window.lastchangeui) {\n    if (window.lastchangeuser && window.lastchangeuserprofile) {\n      const icon = window.lastchangeui.user.children('i')\n      icon.attr('title', window.lastchangeuserprofile.name).tooltip('fixTitle')\n      if (window.lastchangeuserprofile.photo) { icon.attr('style', `background-image:url(${window.lastchangeuserprofile.photo})`) }\n      window.lastchangeui.user.show()\n      window.lastchangeui.nouser.hide()\n    } else {\n      window.lastchangeui.user.hide()\n      window.lastchangeui.nouser.show()\n    }\n  }\n}\n\nwindow.owner = null\nwindow.ownerprofile = null\n\nexport function updateOwner () {\n  if (ownerui) {\n    if (window.owner && window.ownerprofile && window.owner !== window.lastchangeuser) {\n      const icon = ownerui.children('i')\n      icon.attr('title', window.ownerprofile.name).tooltip('fixTitle')\n      const styleString = `background-image:url(${window.ownerprofile.photo})`\n      if (window.ownerprofile.photo && icon.attr('style') !== styleString) { icon.attr('style', styleString) }\n      ownerui.show()\n    } else {\n      ownerui.hide()\n    }\n  }\n}\n\n// get title\nfunction getTitle (view) {\n  let title = ''\n  if (md && md.meta && md.meta.title && (typeof md.meta.title === 'string' || typeof md.meta.title === 'number')) {\n    title = md.meta.title\n  } else {\n    const h1s = view.find('h1')\n    if (h1s.length > 0) {\n      title = h1s.first().text()\n    } else {\n      title = null\n    }\n  }\n  return title\n}\n\n// render title\nexport function renderTitle (view) {\n  let title = getTitle(view)\n  if (title) {\n    title += ' - HedgeDoc'\n  } else {\n    title = 'HedgeDoc - Collaborative markdown notes'\n  }\n  return title\n}\n\n// render filename\nexport function renderFilename (view) {\n  let filename = getTitle(view)\n  if (!filename) {\n    filename = 'Untitled'\n  }\n  return filename\n}\n\n// render tags\nexport function renderTags (view) {\n  const tags = []\n  const rawtags = []\n  if (md && md.meta && md.meta.tags && (typeof md.meta.tags === 'string' || typeof md.meta.tags === 'number')) {\n    const metaTags = (`${md.meta.tags}`).split(',')\n    for (let i = 0; i < metaTags.length; i++) {\n      const text = metaTags[i].trim()\n      if (text) rawtags.push(text)\n    }\n  } else {\n    view.find('h6').each((key, value) => {\n      if (/^tags/gmi.test($(value).text())) {\n        const codes = $(value).find('code')\n        for (let i = 0; i < codes.length; i++) {\n          const text = codes[i].innerHTML.trim()\n          if (text) rawtags.push(text)\n        }\n      }\n    })\n  }\n  for (let i = 0; i < rawtags.length; i++) {\n    let found = false\n    for (let j = 0; j < tags.length; j++) {\n      if (tags[j] === rawtags[i]) {\n        found = true\n        break\n      }\n    }\n    if (!found) { tags.push(rawtags[i]) }\n  }\n  return tags\n}\n\nfunction slugifyWithUTF8 (text) {\n  // remove HTML tags and trim spaces\n  let newText = S(text).trim().stripTags().s\n  // replace space between words with dashes\n  newText = newText.replace(/\\s+/g, '-')\n  // slugify string to make it valid as an attribute\n  newText = newText.replace(/([!\"#$%&'()*+,./:;<=>?@[\\\\\\]^`{|}~])/g, '')\n  return newText\n}\n\nexport function isValidURL (str) {\n  try {\n    const url = new URL(str)\n    return ['http:', 'https:'].includes(url.protocol)\n  } catch (e) {\n    return false\n  }\n}\n\n// parse meta\nexport function parseMeta (md, edit, view, toc, tocAffix) {\n  let lang = null\n  let dir = null\n  let breaks = true\n  if (md && md.meta) {\n    const meta = md.meta\n    lang = meta.lang\n    dir = meta.dir\n    breaks = meta.breaks\n  }\n  // text language\n  if (lang && typeof lang === 'string') {\n    view.attr('lang', lang)\n    toc.attr('lang', lang)\n    tocAffix.attr('lang', lang)\n    if (edit) { edit.attr('lang', lang) }\n  } else {\n    view.removeAttr('lang')\n    toc.removeAttr('lang')\n    tocAffix.removeAttr('lang')\n    if (edit) { edit.removeAttr('lang', lang) }\n  }\n  // text direction\n  if (dir && typeof dir === 'string') {\n    view.attr('dir', dir)\n    toc.attr('dir', dir)\n    tocAffix.attr('dir', dir)\n  } else {\n    view.removeAttr('dir')\n    toc.removeAttr('dir')\n    tocAffix.removeAttr('dir')\n  }\n  // breaks\n  if (typeof breaks === 'boolean' && !breaks) {\n    md.options.breaks = false\n  } else {\n    md.options.breaks = true\n  }\n}\n\nwindow.viewAjaxCallback = null\n\n// regex for extra tags\nconst spaceregex = /\\s*/\nconst notinhtmltagregex = /(?![^<]*>|[^<>]*<\\/)/\nlet coloregex = /\\[color=([#|(|)|\\s|,|\\w]*?)\\]/\ncoloregex = new RegExp(coloregex.source + notinhtmltagregex.source, 'g')\nlet nameregex = /\\[name=(.*?)\\]/\nlet timeregex = /\\[time=([:|,|+|-|(|)|\\s|\\w]*?)\\]/\nconst nameandtimeregex = new RegExp(nameregex.source + spaceregex.source + timeregex.source + notinhtmltagregex.source, 'g')\nnameregex = new RegExp(nameregex.source + notinhtmltagregex.source, 'g')\ntimeregex = new RegExp(timeregex.source + notinhtmltagregex.source, 'g')\n\nfunction replaceExtraTags (html) {\n  html = html.replace(coloregex, '<span class=\"color\" data-color=\"$1\"></span>')\n  html = html.replace(nameandtimeregex, '<small><i class=\"fa fa-user\"></i> $1 <i class=\"fa fa-clock-o\"></i> $2</small>')\n  html = html.replace(nameregex, '<small><i class=\"fa fa-user\"></i> $1</small>')\n  html = html.replace(timeregex, '<small><i class=\"fa fa-clock-o\"></i> $1</small>')\n  return html\n}\n\n// dynamic event or object binding here\nexport function finishView (view) {\n  // todo list\n  const lis = view.find('li.raw').removeClass('raw').sortByDepth().toArray()\n\n  for (let li of lis) {\n    let html = $(li).clone()[0].innerHTML\n    const p = $(li).children('p')\n    if (p.length === 1) {\n      html = p.html()\n      li = p[0]\n    }\n    html = replaceExtraTags(html)\n    li.innerHTML = html\n    let disabled = 'disabled'\n    if (typeof editor !== 'undefined' && window.havePermission()) { disabled = '' }\n    if (/^\\s*\\[[xX ]]\\s*/.test(html)) {\n      li.innerHTML = html.replace(/^\\s*\\[ ]\\s*/, `<input type=\"checkbox\" class=\"task-list-item-checkbox\" ${disabled}><label></label>`)\n        .replace(/^\\s*\\[[xX]]\\s*/, `<input type=\"checkbox\" class=\"task-list-item-checkbox\" checked ${disabled}><label></label>`)\n      if (li.tagName.toLowerCase() !== 'li') {\n        li.parentElement.setAttribute('class', 'task-list-item')\n      } else {\n        li.setAttribute('class', 'task-list-item')\n      }\n    }\n    if (typeof editor !== 'undefined' && window.havePermission()) { $(li).find('input').change(toggleTodoEvent) }\n    // color tag in list will convert it to tag icon with color\n    const tagColor = $(li).closest('ul').find('.color')\n    tagColor.each((key, value) => {\n      $(value).addClass('fa fa-tag').css('color', $(value).attr('data-color'))\n    })\n  }\n\n  // youtube\n  view.find('div.youtube.raw').removeClass('raw')\n    .click(function () {\n      imgPlayiframe(this, 'https://www.youtube.com/embed/')\n    })\n    // vimeo\n  view.find('div.vimeo.raw').removeClass('raw')\n    .click(function () {\n      imgPlayiframe(this, 'https://player.vimeo.com/video/')\n    })\n    .each((key, value) => {\n      const vimeoLink = `https://vimeo.com/${$(value).attr('data-videoid')}`\n      $.ajax({\n        type: 'GET',\n        url: `https://vimeo.com/api/oembed.json?url=${encodeURIComponent(vimeoLink)}`,\n        jsonp: 'callback',\n        dataType: 'jsonp',\n        success (data) {\n          const image = `<img src=\"${data.thumbnail_url}\" />`\n          $(value).prepend(image)\n          if (window.viewAjaxCallback) window.viewAjaxCallback()\n        }\n      })\n    })\n    // gist\n  view.find('code[data-gist-id]').each((key, value) => {\n    if ($(value).children().length === 0) { $(value).gist(window.viewAjaxCallback) }\n  })\n  // sequence diagram\n  const sequences = view.find('div.sequence-diagram.raw').removeClass('raw')\n  sequences.each((key, value) => {\n    let $value\n    try {\n      $value = $(value)\n      const $ele = $(value).parent().parent()\n\n      const sequence = $value\n      sequence.sequenceDiagram({\n        theme: 'simple'\n      })\n\n      $ele.addClass('sequence-diagram')\n      $value.children().unwrap().unwrap()\n      const svg = $ele.find('> svg')\n      svg[0].setAttribute('viewBox', `0 0 ${svg.attr('width')} ${svg.attr('height')}`)\n      svg[0].setAttribute('preserveAspectRatio', 'xMidYMid meet')\n    } catch (err) {\n      $value.unwrap()\n      $value.parent().append(`<div class=\"alert alert-warning\">${escapeHTML(err)}</div>`)\n      console.warn(err)\n    }\n  })\n  // flowchart\n  const flow = view.find('div.flow-chart.raw').removeClass('raw')\n  flow.each((key, value) => {\n    let $value\n    try {\n      $value = $(value)\n      const $ele = $(value).parent().parent()\n\n      const chart = window.flowchart.parse($value.text())\n      $value.html('')\n      chart.drawSVG(value, {\n        'line-width': 2,\n        fill: 'none',\n        'font-size': '16px',\n        'font-family': \"'Andale Mono', monospace\"\n      })\n\n      $ele.addClass('flow-chart')\n      $value.children().unwrap().unwrap()\n    } catch (err) {\n      $value.unwrap()\n      $value.parent().append(`<div class=\"alert alert-warning\">${escapeHTML(err)}</div>`)\n      console.warn(err)\n    }\n  })\n  // graphviz\n  const graphvizs = view.find('div.graphviz.raw').removeClass('raw')\n  graphvizs.each(function (key, value) {\n    let $value\n    try {\n      $value = $(value)\n      const $ele = $(value).parent().parent()\n      require.ensure([], function (require) {\n        const Viz = require('viz.js')\n        const graphviz = Viz($value.text())\n        if (!graphviz) throw Error('viz.js output empty graph')\n        $value.html(graphviz)\n\n        $ele.addClass('graphviz')\n        $value.children().unwrap().unwrap()\n      })\n    } catch (err) {\n      $value.unwrap()\n      $value.parent().append(`<div class=\"alert alert-warning\">${escapeHTML(err)}</div>`)\n      console.warn(err)\n    }\n  })\n  // mermaid\n  const mermaids = view.find('div.mermaid.raw').removeClass('raw')\n  mermaids.each((key, value) => {\n    const $value = $(value)\n    const $ele = $(value).closest('pre')\n    require.ensure([], function (require) {\n      try {\n        const mermaid = require('mermaid').default\n        mermaid.startOnLoad = false\n        mermaid.mermaidAPI.parse($value.text())\n        $ele.addClass('mermaid')\n        $ele.text($value.text())\n        mermaid.init(undefined, $ele)\n      } catch (err) {\n        let errormessage = err\n        if (err.str) {\n          errormessage = err.str\n        }\n        $value.unwrap()\n        $value.parent().append(`<div class=\"alert alert-warning\">${escapeHTML(errormessage)}</div>`)\n        console.warn(errormessage)\n      }\n    })\n  })\n  // abc.js\n  const abcs = view.find('div.abc.raw').removeClass('raw')\n  abcs.each((key, value) => {\n    let $value\n    try {\n      $value = $(value)\n      const $ele = $(value).parent().parent()\n      require.ensure([], function (require) {\n        const abcjs = require('abcjs')\n        abcjs.renderAbc(value, $value.text())\n        $ele.addClass('abc')\n        $value.children().unwrap().unwrap()\n        const svg = $ele.find('> svg')\n        svg[0].setAttribute('viewBox', `0 0 ${svg.attr('width')} ${svg.attr('height')}`)\n        svg[0].setAttribute('preserveAspectRatio', 'xMidYMid meet')\n      })\n    } catch (err) {\n      $value.unwrap()\n      $value.parent().append(`<div class=\"alert alert-warning\">${escapeHTML(err)}</div>`)\n      console.warn(err)\n    }\n  })\n  // image href new window(emoji not included)\n  const images = view.find('img.raw[src]').removeClass('raw')\n  images.each((key, value) => {\n    // if it's already wrapped by link, then ignore\n    const $value = $(value)\n    $value[0].onload = e => {\n      if (window.viewAjaxCallback) window.viewAjaxCallback()\n    }\n  })\n  // blockquote\n  const blockquote = view.find('blockquote.raw').removeClass('raw')\n  const blockquoteP = blockquote.find('p')\n  blockquoteP.each((key, value) => {\n    let html = $(value).html()\n    html = replaceExtraTags(html)\n    $(value).html(html)\n  })\n  // color tag in blockquote will change its left border color\n  const blockquoteColor = blockquote.find('.color')\n  blockquoteColor.each((key, value) => {\n    $(value).closest('blockquote').css('border-left-color', $(value).attr('data-color'))\n  })\n  // slideshare\n  view.find('div.slideshare.raw').removeClass('raw')\n    .each((key, value) => {\n      $.ajax({\n        type: 'GET',\n        url: `https://www.slideshare.net/api/oembed/2?url=https://www.slideshare.net/${$(value).attr('data-slideshareid')}&format=json`,\n        jsonp: 'callback',\n        dataType: 'jsonp',\n        success (data) {\n          const $html = $(data.html)\n          const iframe = $html.closest('iframe')\n          const caption = $html.closest('div')\n          const inner = $('<div class=\"inner\"></div>').append(iframe)\n          const height = iframe.attr('height')\n          const width = iframe.attr('width')\n          const ratio = (height / width) * 100\n          inner.css('padding-bottom', `${ratio}%`)\n          $(value).html(inner).append(caption)\n          if (window.viewAjaxCallback) window.viewAjaxCallback()\n        }\n      })\n    })\n    // speakerdeck\n  view.find('div.speakerdeck.raw').removeClass('raw')\n    .each((key, value) => {\n      const url = `https://speakerdeck.com/${$(value).attr('data-speakerdeckid')}`\n      const inner = $('<a>Speakerdeck</a>')\n      inner.attr('href', url)\n      inner.attr('rel', 'noopener noreferrer')\n      inner.attr('target', '_blank')\n      $(value).append(inner)\n    })\n    // pdf\n  view.find('div.pdf.raw').removeClass('raw')\n    .each(function (key, value) {\n      const url = $(value).attr('data-pdfurl')\n      const inner = $('<div></div>')\n      $(this).append(inner)\n      PDFObject.embed(url, inner, {\n        height: '400px'\n      })\n    })\n    // syntax highlighting\n  view.find('code.raw').removeClass('raw')\n    .each((key, value) => {\n      const langDiv = $(value)\n      if (langDiv.length > 0) {\n        const reallang = langDiv[0].className.replace(/hljs|wrap/g, '').trim()\n        if (reallang === 'mermaid' || reallang === 'abc' || reallang === 'graphviz') {\n          return\n        }\n        const codeDiv = langDiv.find('.code')\n        let code = ''\n        if (codeDiv.length > 0) code = codeDiv.html()\n        else code = langDiv.html()\n        let result\n        if (!reallang) {\n          result = {\n            value: code\n          }\n        } else if (reallang === 'haskell' || reallang === 'go' || reallang === 'typescript' || reallang === 'jsx' || reallang === 'gherkin') {\n          code = S(code).unescapeHTML().s\n          result = {\n            value: Prism.highlight(code, Prism.languages[reallang])\n          }\n        } else if (reallang === 'tiddlywiki' || reallang === 'mediawiki') {\n          code = S(code).unescapeHTML().s\n          result = {\n            value: Prism.highlight(code, Prism.languages.wiki)\n          }\n        } else if (reallang === 'cmake') {\n          code = S(code).unescapeHTML().s\n          result = {\n            value: Prism.highlight(code, Prism.languages.makefile)\n          }\n        } else {\n          require.ensure([], function (require) {\n            const hljs = require('highlight.js')\n            code = S(code).unescapeHTML().s\n            const languages = hljs.listLanguages()\n            if (!languages.includes(reallang)) {\n              result = hljs.highlightAuto(code)\n            } else {\n              result = hljs.highlight(reallang, code)\n            }\n            if (codeDiv.length > 0) codeDiv.html(result.value)\n            else langDiv.html(result.value)\n          })\n          return\n        }\n        if (codeDiv.length > 0) codeDiv.html(result.value)\n        else langDiv.html(result.value)\n      }\n    })\n    // mathjax\n  const mathjaxdivs = view.find('span.mathjax.raw').removeClass('raw').toArray()\n  try {\n    if (mathjaxdivs.length > 1) {\n      window.MathJax.Hub.Queue(['Typeset', window.MathJax.Hub, mathjaxdivs])\n      window.MathJax.Hub.Queue(window.viewAjaxCallback)\n    } else if (mathjaxdivs.length > 0) {\n      window.MathJax.Hub.Queue(['Typeset', window.MathJax.Hub, mathjaxdivs[0]])\n      window.MathJax.Hub.Queue(window.viewAjaxCallback)\n    }\n  } catch (err) {\n    console.warn(err)\n  }\n  // render title\n  document.title = renderTitle(view)\n}\n\n// only static transform should be here\nexport function postProcess (code) {\n  const result = $(`<div>${code}</div>`)\n  // process style tags\n  result.find('style').each((key, value) => {\n    let html = $(value).html()\n    // unescape > symbel inside the style tags\n    html = html.replace(/&gt;/g, '>')\n    // remove css @import to prevent XSS\n    html = html.replace(/@import url\\(([^)]*)\\);?/gi, '')\n    $(value).html(html)\n  })\n  // link should open in new window or tab\n  // also add noopener to prevent clickjacking\n  // See details: https://mathiasbynens.github.io/rel-noopener/\n  result.find('a:not([href^=\"#\"]):not([target])').attr('target', '_blank').attr('rel', 'noopener')\n\n  // If it's hashtag link then make it base uri independent\n  result.find('a[href^=\"#\"]').each((index, linkTag) => {\n    const currentLocation = new URL(window.location)\n    currentLocation.hash = linkTag.hash\n    linkTag.href = currentLocation.toString()\n  })\n\n  // update continue line numbers\n  const linenumberdivs = result.find('.gutter.linenumber').toArray()\n  for (let i = 0; i < linenumberdivs.length; i++) {\n    if ($(linenumberdivs[i]).hasClass('continue')) {\n      const startnumber = linenumberdivs[i - 1] ? parseInt($(linenumberdivs[i - 1]).find('> span').last().attr('data-linenumber')) : 0\n      $(linenumberdivs[i]).find('> span').each((key, value) => {\n        $(value).attr('data-linenumber', startnumber + key + 1)\n      })\n    }\n  }\n  // show yaml meta paring error\n  if (md.metaError) {\n    let warning = result.find('div#meta-error')\n    if (warning && warning.length > 0) {\n      warning.text(md.metaError)\n    } else {\n      warning = $(`<div id=\"meta-error\" class=\"alert alert-warning\">${escapeHTML(md.metaError)}</div>`)\n      result.prepend(warning)\n    }\n  }\n  return result\n}\nwindow.postProcess = postProcess\n\nconst domevents = Object.getOwnPropertyNames(document).concat(Object.getOwnPropertyNames(Object.getPrototypeOf(Object.getPrototypeOf(document)))).concat(Object.getOwnPropertyNames(Object.getPrototypeOf(window))).filter(function (i) {\n  return !i.indexOf('on') && (document[i] === null || typeof document[i] === 'function')\n}).filter(function (elem, pos, self) {\n  return self.indexOf(elem) === pos\n})\n\nexport function removeDOMEvents (view) {\n  for (let i = 0, l = domevents.length; i < l; i++) {\n    view.find('[' + domevents[i] + ']').removeAttr(domevents[i])\n  }\n}\nwindow.removeDOMEvents = removeDOMEvents\n\nfunction toDataURL (url, callback) {\n  fetch(url).then(response => {\n    const fr = new FileReader()\n    fr.onload = function () {\n      callback(this.result)\n    }\n    response.blob().then(blob => {\n      fr.readAsDataURL(blob)\n    })\n  })\n}\n\nfunction generateCleanHTML (view) {\n  const src = view.clone()\n  const eles = src.find('*')\n  // remove syncscroll parts\n  eles.removeClass('part')\n  src.find('*[class=\"\"]').removeAttr('class')\n  eles.removeAttr('data-startline data-endline')\n  src.find(\"a[href^='#'][smoothhashscroll]\").removeAttr('smoothhashscroll')\n  // remove gist content\n  src.find('code[data-gist-id]').children().remove()\n  // disable todo list\n  src.find('input.task-list-item-checkbox').attr('disabled', '')\n  // replace emoji image path\n  src.find('img.emoji').each((key, value) => {\n    toDataURL($(value).attr('src'), dataURL => {\n      $(value).attr('src', dataURL)\n    })\n  })\n  // replace video to iframe\n  src.find('div[data-videoid]').each((key, value) => {\n    const id = $(value).attr('data-videoid')\n    const style = $(value).attr('style')\n    let url = null\n    if ($(value).hasClass('youtube')) {\n      url = 'https://www.youtube.com/embed/'\n    } else if ($(value).hasClass('vimeo')) {\n      url = 'https://player.vimeo.com/video/'\n    }\n    if (url) {\n      const iframe = $('<iframe frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>')\n      iframe.attr('src', url + id)\n      iframe.attr('style', style)\n      $(value).html(iframe)\n    }\n  })\n  return src\n}\n\nexport function exportToRawHTML (view) {\n  const filename = `${renderFilename(ui.area.markdown)}.html`\n  const src = generateCleanHTML(view)\n  $(src).find('a.anchor').remove()\n  const html = src[0].outerHTML\n  const blob = new Blob([html], {\n    type: 'text/html;charset=utf-8'\n  })\n  saveAs(blob, filename, true)\n}\n\n// extract markdown body to html and compile to template\nexport function exportToHTML (view) {\n  const title = renderTitle(ui.area.markdown)\n  const filename = `${renderFilename(ui.area.markdown)}.html`\n  const src = generateCleanHTML(view)\n  // generate toc\n  const toc = $('#ui-toc').clone()\n  toc.find('*').removeClass('active').find(\"a[href^='#'][smoothhashscroll]\").removeAttr('smoothhashscroll')\n  const tocAffix = $('#ui-toc-affix').clone()\n  tocAffix.find('*').removeClass('active').find(\"a[href^='#'][smoothhashscroll]\").removeAttr('smoothhashscroll')\n  // generate html via template\n  $.get(`${serverurl}/build/htmlexport.html`, template => {\n    let html = template.replace('{{{url}}}', serverurl)\n    html = html.replace('{{title}}', title)\n    html = html.replace('{{{html}}}', src[0].outerHTML)\n    html = html.replace('{{{ui-toc}}}', toc.html())\n    html = html.replace('{{{ui-toc-affix}}}', tocAffix.html())\n    html = html.replace('{{{lang}}}', (md && md.meta && md.meta.lang) ? `lang=\"${md.meta.lang}\"` : '')\n    html = html.replace('{{{dir}}}', (md && md.meta && md.meta.dir) ? `dir=\"${md.meta.dir}\"` : '')\n    const blob = new Blob([html], {\n      type: 'text/html;charset=utf-8'\n    })\n    saveAs(blob, filename, true)\n  })\n}\n\n// jQuery sortByDepth\n$.fn.sortByDepth = function () {\n  const ar = this.map(function () {\n    return {\n      length: $(this).parents().length,\n      elt: this\n    }\n  }).get()\n\n  const result = []\n  let i = ar.length\n  ar.sort((a, b) => a.length - b.length)\n  while (i--) {\n    result.push(ar[i].elt)\n  }\n  return $(result)\n}\n\nfunction toggleTodoEvent (e) {\n  const startline = $(this).closest('li').attr('data-startline') - 1\n  const line = window.editor.getLine(startline)\n  const matches = line.match(/^[>\\s-]*(?:[-+*]|\\d+[.)])\\s\\[([xX ])]/)\n  if (matches && matches.length >= 2) {\n    let checked = null\n    if (matches[1].toLowerCase() === 'x') { checked = true } else if (matches[1] === ' ') { checked = false }\n    const replacements = matches[0].match(/(^[>\\s-]*(?:[-+*]|\\d+[.)])\\s\\[)([xX ])(])/)\n    window.editor.replaceRange(checked ? ' ' : 'x', {\n      line: startline,\n      ch: replacements[1].length\n    }, {\n      line: startline,\n      ch: replacements[1].length + 1\n    }, '+input')\n  }\n}\n\n// remove hash\nfunction removeHash () {\n  history.pushState('', document.title, window.location.pathname + window.location.search)\n}\n\nlet tocExpand = false\n\nfunction checkExpandToggle () {\n  const toc = $('.ui-toc-dropdown .toc')\n  const toggle = $('.expand-toggle')\n  if (!tocExpand) {\n    toc.removeClass('expand')\n    toggle.text('Expand all')\n  } else {\n    toc.addClass('expand')\n    toggle.text('Collapse all')\n  }\n}\n\n// toc\nexport function generateToc (id) {\n  const target = $(`#${id}`)\n  target.html('')\n  /* eslint-disable no-unused-vars */\n  const toc = new window.Toc('doc', {\n    level: 3,\n    top: -1,\n    class: 'toc',\n    ulClass: 'nav',\n    targetId: id,\n    process: getHeaderContent\n  })\n  /* eslint-enable no-unused-vars */\n  if (target.text() === 'undefined') { target.html('') }\n  const tocMenu = $('<div class=\"toc-menu\"></div')\n  const toggle = $('<a class=\"expand-toggle\" href=\"#\">Expand all</a>')\n  const backtotop = $('<a class=\"back-to-top\" href=\"#\">Back to top</a>')\n  const gotobottom = $('<a class=\"go-to-bottom\" href=\"#\">Go to bottom</a>')\n  checkExpandToggle()\n  toggle.click(e => {\n    e.preventDefault()\n    e.stopPropagation()\n    tocExpand = !tocExpand\n    checkExpandToggle()\n  })\n  backtotop.click(e => {\n    e.preventDefault()\n    e.stopPropagation()\n    if (window.scrollToTop) { window.scrollToTop() }\n    removeHash()\n  })\n  gotobottom.click(e => {\n    e.preventDefault()\n    e.stopPropagation()\n    if (window.scrollToBottom) { window.scrollToBottom() }\n    removeHash()\n  })\n  tocMenu.append(toggle).append(backtotop).append(gotobottom)\n  target.append(tocMenu)\n}\n\n// smooth all hash trigger scrolling\nexport function smoothHashScroll () {\n  const hashElements = $(\"a[href^='#']:not([smoothhashscroll])\").toArray()\n\n  for (const element of hashElements) {\n    const $element = $(element)\n    const hash = element.hash\n    if (hash) {\n      $element.on('click', function (e) {\n        // store hash\n        const hash = decodeURIComponent(this.hash)\n        // escape special characters in jquery selector\n        const $hash = $(hash.replace(/(:|\\.|\\[|\\]|,)/g, '\\\\$1'))\n        // return if no element been selected\n        if ($hash.length <= 0) return\n        // prevent default anchor click behavior\n        e.preventDefault()\n        // animate\n        $('body, html').stop(true, true).animate({\n          scrollTop: $hash.offset().top\n        }, 100, 'linear', () => {\n          // when done, add hash to url\n          // (default click behaviour)\n          window.location.hash = hash\n        })\n      })\n      $element.attr('smoothhashscroll', '')\n    }\n  }\n}\n\nfunction imgPlayiframe (element, src) {\n  if (!$(element).attr('data-videoid')) return\n  const iframe = $(\"<iframe frameborder='0' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>\")\n  $(iframe).attr('src', `${src + $(element).attr('data-videoid')}?autoplay=1`)\n  $(element).find('img').css('visibility', 'hidden')\n  $(element).append(iframe)\n}\n\nconst anchorForId = id => {\n  const anchor = document.createElement('a')\n  anchor.ariaHidden = 'true'\n  anchor.className = 'anchor hidden-xs'\n  anchor.href = new URL(`${document.location.search}#${id}`, document.location).toString()\n  anchor.innerHTML = '<i class=\"fa fa-link\"></i>'\n  anchor.title = id\n  return anchor\n}\n\nconst createHeaderId = (headerContent, headerIds = null) => {\n  // to escape characters not allow in css and humanize\n  const slug = slugifyWithUTF8(headerContent)\n  let id\n  if (window.linkifyHeaderStyle === 'keep-case') {\n    id = slug\n  } else if (window.linkifyHeaderStyle === 'lower-case') {\n    // to make compatible with GitHub, GitLab, Pandoc and many more\n    id = slug.toLowerCase()\n  } else if (window.linkifyHeaderStyle === 'gfm') {\n    // see GitHub implementation reference:\n    // https://gist.github.com/asabaylus/3071099#gistcomment-1593627\n    // it works like 'lower-case', but ...\n    const idBase = slug.toLowerCase()\n    id = idBase\n    if (headerIds !== null) {\n      // ... making sure the id is unique\n      let i = 1\n      while (headerIds.has(id)) {\n        id = idBase + '-' + i\n        i++\n      }\n      headerIds.add(id)\n    }\n  } else {\n    throw new Error('Unknown linkifyHeaderStyle value \"' + window.linkifyHeaderStyle + '\"')\n  }\n  return id\n}\n\nconst linkifyAnchors = (level, containingElement) => {\n  const headers = containingElement.getElementsByTagName(`h${level}`)\n\n  for (let i = 0, l = headers.length; i < l; i++) {\n    const header = headers[i]\n    if (header.getElementsByClassName('anchor').length === 0) {\n      if (typeof header.id === 'undefined' || header.id === '') {\n        header.id = createHeaderId(getHeaderContent(header))\n      }\n      if (!(typeof header.id === 'undefined' || header.id === '')) {\n        header.insertBefore(anchorForId(header.id), header.firstChild)\n      }\n    }\n  }\n}\n\nexport function autoLinkify (view) {\n  const contentBlock = view[0]\n  if (!contentBlock) {\n    return\n  }\n  for (let level = 1; level <= 6; level++) {\n    linkifyAnchors(level, contentBlock)\n  }\n}\n\nfunction getHeaderContent (header) {\n  const headerHTML = $(header).clone()\n  headerHTML.find('.MathJax_Preview').remove()\n  headerHTML.find('.MathJax').remove()\n  return headerHTML[0].innerHTML\n}\n\nfunction changeHeaderId ($header, id, newId) {\n  $header.attr('id', newId)\n  const $headerLink = $header.find(`> a.anchor[href=\"#${id}\"]`)\n  $headerLink.attr('href', `#${newId}`)\n  $headerLink.attr('title', newId)\n}\n\nexport function deduplicatedHeaderId (view) {\n  // headers contained in the last change\n  const headers = view.find(':header.raw').removeClass('raw').toArray()\n  if (headers.length === 0) {\n    return\n  }\n  if (window.linkifyHeaderStyle === 'gfm') {\n    // consistent with GitHub, GitLab, Pandoc & co.\n    // all headers contained in the document, in order of appearance\n    const allHeaders = view.find(':header').toArray()\n    // list of finaly assigned header IDs\n    const headerIds = new Set()\n    for (let j = 0; j < allHeaders.length; j++) {\n      const $header = $(allHeaders[j])\n      const id = $header.attr('id')\n      const newId = createHeaderId(getHeaderContent($header), headerIds)\n      changeHeaderId($header, id, newId)\n    }\n  } else {\n    // the legacy way\n    for (let i = 0; i < headers.length; i++) {\n      const id = $(headers[i]).attr('id')\n      if (!id) continue\n      const duplicatedHeaders = view.find(`:header[id=\"${id}\"]`).toArray()\n      for (let j = 0; j < duplicatedHeaders.length; j++) {\n        if (duplicatedHeaders[j] !== headers[i]) {\n          const newId = id + j\n          const $header = $(duplicatedHeaders[j])\n          changeHeaderId($header, id, newId)\n        }\n      }\n    }\n  }\n}\n\nexport function renderTOC (view) {\n  const tocs = view.find('.toc').toArray()\n  for (let i = 0; i < tocs.length; i++) {\n    const toc = $(tocs[i])\n    const id = `toc${i}`\n    toc.attr('id', id)\n    const target = $(`#${id}`)\n    target.html('')\n    /* eslint-disable no-unused-vars */\n    const TOC = new window.Toc('doc', {\n      level: 3,\n      top: -1,\n      class: 'toc',\n      targetId: id,\n      process: getHeaderContent\n    })\n    /* eslint-enable no-unused-vars */\n    if (target.text() === 'undefined') { target.html('') }\n    target.replaceWith(target.html())\n  }\n}\n\nexport function scrollToHash () {\n  const hash = location.hash\n  location.hash = ''\n  location.hash = hash\n}\n\nfunction highlightRender (code, lang) {\n  if (!lang || /no(-?)highlight|plain|text/.test(lang)) { return }\n  code = S(code).escapeHTML().s\n  if (lang === 'sequence') {\n    return `<div class=\"sequence-diagram raw\">${code}</div>`\n  } else if (lang === 'flow') {\n    return `<div class=\"flow-chart raw\">${code}</div>`\n  } else if (lang === 'graphviz') {\n    return `<div class=\"graphviz raw\">${code}</div>`\n  } else if (lang === 'mermaid') {\n    return `<div class=\"mermaid raw\">${code}</div>`\n  } else if (lang === 'abc') {\n    return `<div class=\"abc raw\">${code}</div>`\n  }\n  const result = {\n    value: code\n  }\n  const showlinenumbers = /=$|=\\d+$|=\\+$/.test(lang)\n  if (showlinenumbers) {\n    let startnumber = 1\n    const matches = lang.match(/=(\\d+)$/)\n    if (matches) { startnumber = parseInt(matches[1]) }\n    const lines = result.value.split('\\n')\n    const linenumbers = []\n    for (let i = 0; i < lines.length - 1; i++) {\n      linenumbers[i] = `<span data-linenumber='${startnumber + i}'></span>`\n    }\n    const continuelinenumber = /=\\+$/.test(lang)\n    const linegutter = `<div class='gutter linenumber${continuelinenumber ? ' continue' : ''}'>${linenumbers.join('\\n')}</div>`\n    result.value = `<div class='wrapper'>${linegutter}<div class='code'>${result.value}</div></div>`\n  }\n  return result.value\n}\n\nexport const md = markdownit('default', {\n  html: true,\n  breaks: true,\n  langPrefix: '',\n  linkify: true,\n  typographer: true,\n  highlight: highlightRender\n})\nwindow.md = md\n\nmd.use(require('markdown-it-abbr'))\nmd.use(require('markdown-it-footnote'))\nmd.use(require('markdown-it-deflist'))\nmd.use(require('markdown-it-mark'))\nmd.use(require('markdown-it-ins'))\nmd.use(require('markdown-it-sub'))\nmd.use(require('markdown-it-sup'))\nmd.use(require('markdown-it-mathjax')({\n  beforeMath: '<span class=\"mathjax raw\">',\n  afterMath: '</span>',\n  beforeInlineMath: '<span class=\"mathjax raw\">\\\\(',\n  afterInlineMath: '\\\\)</span>',\n  beforeDisplayMath: '<span class=\"mathjax raw\">\\\\[',\n  afterDisplayMath: '\\\\]</span>'\n}))\nmd.use(require('markdown-it-imsize'))\n\nmd.use(require('markdown-it-emoji'), {\n  shortcuts: {}\n})\n\nwindow.emojify.setConfig({\n  blacklist: {\n    elements: ['script', 'textarea', 'a', 'pre', 'code', 'svg'],\n    classes: ['no-emojify']\n  },\n  img_dir: `${serverurl}/build/emojify.js/dist/images/basic`,\n  ignore_emoticons: true\n})\n\nmd.renderer.rules.emoji = (token, idx) => window.emojify.replace(`:${token[idx].markup}:`)\n\nfunction renderContainer (tokens, idx, options, env, self) {\n  tokens[idx].attrJoin('role', 'alert')\n  tokens[idx].attrJoin('class', 'alert')\n  tokens[idx].attrJoin('class', `alert-${tokens[idx].info.trim()}`)\n  return self.renderToken(...arguments)\n}\nmd.use(markdownitContainer, 'success', { render: renderContainer })\nmd.use(markdownitContainer, 'info', { render: renderContainer })\nmd.use(markdownitContainer, 'warning', { render: renderContainer })\nmd.use(markdownitContainer, 'danger', { render: renderContainer })\n\nconst defaultImageRender = md.renderer.rules.image\nmd.renderer.rules.image = function (tokens, idx, options, env, self) {\n  tokens[idx].attrJoin('class', 'raw')\n  return defaultImageRender(...arguments)\n}\nmd.renderer.rules.list_item_open = function (tokens, idx, options, env, self) {\n  tokens[idx].attrJoin('class', 'raw')\n  return self.renderToken(...arguments)\n}\nmd.renderer.rules.blockquote_open = function (tokens, idx, options, env, self) {\n  tokens[idx].attrJoin('class', 'raw')\n  return self.renderToken(...arguments)\n}\nmd.renderer.rules.heading_open = function (tokens, idx, options, env, self) {\n  tokens[idx].attrJoin('class', 'raw')\n  return self.renderToken(...arguments)\n}\nmd.renderer.rules.fence = (tokens, idx, options, env, self) => {\n  const token = tokens[idx]\n  const info = token.info ? md.utils.unescapeAll(token.info).trim() : ''\n  let langName = ''\n  let highlighted\n\n  if (info) {\n    langName = info.split(/\\s+/g)[0]\n    if (/!$/.test(info)) token.attrJoin('class', 'wrap')\n    token.attrJoin('class', options.langPrefix + langName.replace(/=$|=\\d+$|=\\+$|!$|=!$/, ''))\n    token.attrJoin('class', 'hljs')\n    token.attrJoin('class', 'raw')\n  }\n\n  if (options.highlight) {\n    highlighted = options.highlight(token.content, langName) || md.utils.escapeHtml(token.content)\n  } else {\n    highlighted = md.utils.escapeHtml(token.content)\n  }\n\n  if (highlighted.indexOf('<pre') === 0) {\n    return `${highlighted}\\n`\n  }\n\n  return `<pre><code${self.renderAttrs(token)}>${highlighted}</code></pre>\\n`\n}\n\n// youtube\nconst youtubePlugin = new Plugin(\n  // regexp to match\n  /{%youtube\\s*([\\w-]{11})\\s*%}/,\n\n  (match, utils) => {\n    const videoid = match[1]\n    if (!videoid) return\n    const div = $('<div class=\"youtube raw\"></div>')\n    div.attr('data-videoid', videoid)\n    const thumbnailSrc = `https://img.youtube.com/vi/${videoid}/hqdefault.jpg`\n    const image = `<img src=\"${thumbnailSrc}\" />`\n    div.append(image)\n    const icon = '<i class=\"icon fa fa-youtube-play fa-5x\"></i>'\n    div.append(icon)\n    return div[0].outerHTML\n  }\n)\n// vimeo\nconst vimeoPlugin = new Plugin(\n  // regexp to match\n  /{%vimeo\\s*(\\d{6,11})\\s*%}/,\n\n  (match, utils) => {\n    const videoid = match[1]\n    if (!videoid) return\n    const div = $('<div class=\"vimeo raw\"></div>')\n    div.attr('data-videoid', videoid)\n    const icon = '<i class=\"icon fa fa-vimeo-square fa-5x\"></i>'\n    div.append(icon)\n    return div[0].outerHTML\n  }\n)\n// gist\nconst gistPlugin = new Plugin(\n  // regexp to match\n  /{%gist\\s*(\\w+\\/\\w+)\\s*%}/,\n\n  (match, utils) => {\n    const gistid = match[1]\n    const code = `<code data-gist-id=\"${gistid}\"></code>`\n    return code\n  }\n)\n// TOC\nconst tocPlugin = new Plugin(\n  // regexp to match\n  /^\\[TOC\\]$/i,\n\n  (match, utils) => '<div class=\"toc\"></div>'\n)\n// slideshare\nconst slidesharePlugin = new Plugin(\n  // regexp to match\n  /{%slideshare\\s*(\\w+\\/[\\w-]+)\\s*%}/,\n\n  (match, utils) => {\n    const slideshareid = match[1]\n    const div = $('<div class=\"slideshare raw\"></div>')\n    div.attr('data-slideshareid', slideshareid)\n    return div[0].outerHTML\n  }\n)\n// speakerdeck\nconst speakerdeckPlugin = new Plugin(\n  // regexp to match\n  /{%speakerdeck\\s*(\\w+\\/[\\w-]+)\\s*%}/,\n\n  (match, utils) => {\n    const speakerdeckid = match[1]\n    const div = $('<div class=\"speakerdeck raw\"></div>')\n    div.attr('data-speakerdeckid', speakerdeckid)\n    return div[0].outerHTML\n  }\n)\n// pdf\nconst pdfPlugin = new Plugin(\n  // regexp to match\n  /{%pdf\\s*([\\d\\D]*?)\\s*%}/,\n\n  (match, utils) => {\n    const pdfurl = match[1]\n    if (!isValidURL(pdfurl)) return match[0]\n    const div = $('<div class=\"pdf raw\"></div>')\n    div.attr('data-pdfurl', pdfurl)\n    return div[0].outerHTML\n  }\n)\n\nconst emojijsPlugin = new Plugin(\n  // regexp to match emoji shortcodes :something:\n  // We generate an universal regex that guaranteed only contains the\n  // emojies we have available. This should prevent all false-positives\n  new RegExp(':(' + window.emojify.emojiNames.map((item) => { return RegExp.escape(item) }).join('|') + '):', 'i'),\n\n  (match, utils) => {\n    const emoji = match[1].toLowerCase()\n    const div = $(`<img class=\"emoji\" alt=\":${emoji}:\" src=\"${serverurl}/build/emojify.js/dist/images/basic/${emoji}.png\"></img>`)\n    return div[0].outerHTML\n  }\n)\n\n// yaml meta, from https://github.com/eugeneware/remarkable-meta\nfunction get (state, line) {\n  const pos = state.bMarks[line]\n  const max = state.eMarks[line]\n  return state.src.substr(pos, max - pos)\n}\n\nfunction meta (state, start, end, silent) {\n  if (start !== 0 || state.blkIndent !== 0) return false\n  if (state.tShift[start] < 0) return false\n  if (!get(state, start).match(/^---$/)) return false\n\n  const data = []\n  let line\n  for (line = start + 1; line < end; line++) {\n    const str = get(state, line)\n    if (str.match(/^(\\.{3}|-{3})$/)) break\n    if (state.tShift[line] < 0) break\n    data.push(str)\n  }\n\n  if (line >= end) return false\n\n  try {\n    md.meta = window.jsyaml.safeLoad(data.join('\\n')) || {}\n    delete md.metaError\n  } catch (err) {\n    md.metaError = err\n    console.warn(err)\n    return false\n  }\n\n  state.line = line + 1\n\n  return true\n}\n\nfunction metaPlugin (md) {\n  md.meta = md.meta || {}\n  md.block.ruler.before('code', 'meta', meta, {\n    alt: []\n  })\n}\n\nmd.use(metaPlugin)\nmd.use(emojijsPlugin)\nmd.use(youtubePlugin)\nmd.use(vimeoPlugin)\nmd.use(gistPlugin)\nmd.use(tocPlugin)\nmd.use(slidesharePlugin)\nmd.use(speakerdeckPlugin)\nmd.use(pdfPlugin)\n\nexport default {\n  md\n}\n","// allow some attributes\n\nconst filterXSS = require('xss')\n\nconst whiteListAttr = ['id', 'class', 'style']\nwindow.whiteListAttr = whiteListAttr\n// allow link starts with '.', '/' and custom protocol with '://', exclude link starts with javascript://\nconst linkRegex = /^(?!javascript:\\/\\/)([\\w|-]+:\\/\\/)|^([.|/])+/i\n// allow data uri, from https://gist.github.com/bgrins/6194623\nconst dataUriRegex = /^\\s*data:([a-z]+\\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@/?%\\s]*)\\s*$/i\n// custom white list\nconst whiteList = filterXSS.whiteList\n// allow ol specify start number\nwhiteList.ol = ['start']\n// allow li specify value number\nwhiteList.li = ['value']\n// allow style tag\nwhiteList.style = []\n// allow kbd tag\nwhiteList.kbd = []\n// allow ifram tag with some safe attributes\nwhiteList.iframe = ['allowfullscreen', 'name', 'referrerpolicy', 'src', 'width', 'height']\n// allow summary tag\nwhiteList.summary = []\n// allow ruby tag\nwhiteList.ruby = []\n// allow rp tag for ruby\nwhiteList.rp = []\n// allow rt tag for ruby\nwhiteList.rt = []\n// allow figure tag\nwhiteList.figure = []\n// allow figcaption tag\nwhiteList.figcaption = []\n\nconst filterXSSOptions = {\n  allowCommentTag: true,\n  whiteList,\n  escapeHtml: function (html) {\n    // allow html comment in multiple lines\n    return html.replace(/<(?!!--)/g, '&lt;').replace(/-->/g, '__HTML_COMMENT_END__').replace(/>/g, '&gt;').replace(/__HTML_COMMENT_END__/g, '-->')\n  },\n  onIgnoreTag: function (tag, html, options) {\n    // allow comment tag\n    if (tag === '!--') {\n      // do not filter its attributes\n      return html.replace(/<(?!!--)/g, '&lt;').replace(/-->/g, '__HTML_COMMENT_END__').replace(/>/g, '&gt;').replace(/__HTML_COMMENT_END__/g, '-->')\n    }\n  },\n  onTagAttr: function (tag, name, value, isWhiteAttr) {\n    // allow href and src that match linkRegex\n    if (isWhiteAttr && (name === 'href' || name === 'src') && linkRegex.test(value)) {\n      return name + '=\"' + filterXSS.escapeAttrValue(value) + '\"'\n    }\n    // allow data uri in img src\n    if (isWhiteAttr && (tag === 'img' && name === 'src') && dataUriRegex.test(value)) {\n      return name + '=\"' + filterXSS.escapeAttrValue(value) + '\"'\n    }\n  },\n  onIgnoreTagAttr: function (tag, name, value, isWhiteAttr) {\n    // allow attr start with 'data-' or in the whiteListAttr\n    if (name.substr(0, 5) === 'data-' || window.whiteListAttr.indexOf(name) !== -1) {\n      // escape its value using built-in escapeAttrValue function\n      return name + '=\"' + filterXSS.escapeAttrValue(value) + '\"'\n    }\n  }\n}\n\nfunction preventXSS (html) {\n  return filterXSS(html, filterXSSOptions)\n}\nwindow.preventXSS = preventXSS\n\nmodule.exports = {\n  preventXSS,\n  escapeAttrValue: filterXSS.escapeAttrValue\n}\n","var map = {\n\t\"./bmp\": 49,\n\t\"./bmp.js\": 49,\n\t\"./gif\": 50,\n\t\"./gif.js\": 50,\n\t\"./jpg\": 51,\n\t\"./jpg.js\": 51,\n\t\"./png\": 52,\n\t\"./png.js\": 52,\n\t\"./psd\": 53,\n\t\"./psd.js\": 53,\n\t\"./svg\": 54,\n\t\"./svg.js\": 54,\n\t\"./tiff\": 55,\n\t\"./tiff.js\": 55,\n\t\"./webp\": 56,\n\t\"./webp.js\": 56\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 271;","// extracted by mini-css-extract-plugin\nexport {};","module.exports = $;","/* global Cookies */\nconst supportedLanguages = require('../../locales/_supported.json')\n\nfunction detectLang () {\n  if (Cookies.get('locale')) {\n    let lang = Cookies.get('locale')\n    if (lang === 'zh') {\n      lang = 'zh-TW'\n    }\n    return lang\n  }\n  const userLang = navigator.language || navigator.userLanguage\n  const userLangCode = userLang.split('-')[0]\n  const supportedLanguagesList = Object.keys(supportedLanguages)\n  if (supportedLanguagesList.includes(userLangCode)) {\n    return userLangCode\n  } else if (supportedLanguagesList.includes(userLang)) {\n    return userLang\n  }\n  return 'en'\n}\n\nconst lang = detectLang()\nconst localeSelector = $('.ui-locale')\nObject.entries(supportedLanguages).forEach(function ([isoCode, nativeName]) {\n  localeSelector.append(`<option value=\"${isoCode}\">${nativeName}</option>`)\n})\n\n// the following condition is needed as the selector is only available in the intro/history page\nif (localeSelector.length > 0) {\n  localeSelector.val(lang)\n  $('select.ui-locale option[value=\"' + lang + '\"]').attr('selected', 'selected')\n  localeSelector.change(function () {\n    Cookies.set('locale', $(this).val(), {\n      expires: 365,\n      sameSite: window.cookiePolicy,\n      secure: window.location.protocol === 'https:'\n    })\n    window.location.reload()\n  })\n}\n\nwindow.moment.locale(lang)\n","// extracted by mini-css-extract-plugin\nexport {};","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };","/*\n *  Global UI elements references\n */\n\nexport const getUIElements = () => ({\n  spinner: $('.ui-spinner'),\n  content: $('.ui-content'),\n  toolbar: {\n    shortStatus: $('.ui-short-status'),\n    status: $('.ui-status'),\n    new: $('.ui-new'),\n    publish: $('.ui-publish'),\n    extra: {\n      revision: $('.ui-extra-revision'),\n      slide: $('.ui-extra-slide')\n    },\n    download: {\n      markdown: $('.ui-download-markdown'),\n      html: $('.ui-download-html'),\n      rawhtml: $('.ui-download-raw-html')\n    },\n    export: {\n      dropbox: $('.ui-save-dropbox'),\n      gist: $('.ui-save-gist'),\n      snippet: $('.ui-save-snippet')\n    },\n    import: {\n      dropbox: $('.ui-import-dropbox'),\n      gist: $('.ui-import-gist'),\n      snippet: $('.ui-import-snippet'),\n      clipboard: $('.ui-import-clipboard')\n    },\n    mode: $('.ui-mode'),\n    edit: $('.ui-edit'),\n    view: $('.ui-view'),\n    both: $('.ui-both'),\n    night: $('.ui-night')\n  },\n  infobar: {\n    lastchange: $('.ui-lastchange'),\n    lastchangeuser: $('.ui-lastchangeuser'),\n    nolastchangeuser: $('.ui-no-lastchangeuser'),\n    permission: {\n      permission: $('.ui-permission'),\n      label: $('.ui-permission-label'),\n      freely: $('.ui-permission-freely'),\n      editable: $('.ui-permission-editable'),\n      locked: $('.ui-permission-locked'),\n      private: $('.ui-permission-private'),\n      limited: $('.ui-permission-limited'),\n      protected: $('.ui-permission-protected')\n    },\n    delete: $('.ui-delete-note')\n  },\n  toc: {\n    toc: $('.ui-toc'),\n    affix: $('.ui-affix-toc'),\n    label: $('.ui-toc-label'),\n    dropdown: $('.ui-toc-dropdown')\n  },\n  area: {\n    edit: $('.ui-edit-area'),\n    view: $('.ui-view-area'),\n    codemirror: $('.ui-edit-area .CodeMirror'),\n    codemirrorScroll: $('.ui-edit-area .CodeMirror .CodeMirror-scroll'),\n    codemirrorSizer: $('.ui-edit-area .CodeMirror .CodeMirror-sizer'),\n    codemirrorSizerInner: $(\n      '.ui-edit-area .CodeMirror .CodeMirror-sizer > div'\n    ),\n    markdown: $('.ui-view-area .markdown-body'),\n    resize: {\n      handle: $('.ui-resizable-handle'),\n      syncToggle: $('.ui-sync-toggle')\n    }\n  },\n  modal: {\n    snippetImportProjects: $('#snippetImportModalProjects'),\n    snippetImportSnippets: $('#snippetImportModalSnippets'),\n    revision: $('#revisionModal')\n  }\n})\n\nexport default getUIElements\n","/* global refreshView */\n\nimport {\n  autoLinkify,\n  deduplicatedHeaderId,\n  removeDOMEvents,\n  finishView,\n  generateToc,\n  md,\n  parseMeta,\n  postProcess,\n  renderTOC,\n  scrollToHash,\n  smoothHashScroll,\n  updateLastChange\n} from './extra'\n\nimport { preventXSS } from './render'\n\nrequire('../css/extra.css')\nrequire('../css/slide-preview.css')\nrequire('../css/site.css')\n\nrequire('highlight.js/styles/github-gist.css')\n\nconst markdown = $('#doc.markdown-body')\nconst text = markdown.text()\nconst lastMeta = md.meta\nmd.meta = {}\ndelete md.metaError\nlet rendered = md.render(text)\nif (md.meta.type && md.meta.type === 'slide') {\n  const slideOptions = {\n    separator: '^(\\r\\n?|\\n)---(\\r\\n?|\\n)$',\n    verticalSeparator: '^(\\r\\n?|\\n)----(\\r\\n?|\\n)$'\n  }\n  const slides = window.RevealMarkdown.slidify(text, slideOptions)\n  markdown.html(slides)\n  window.RevealMarkdown.initialize()\n  // prevent XSS\n  markdown.html(preventXSS(markdown.html()))\n  markdown.addClass('slides')\n} else {\n  if (lastMeta.type && lastMeta.type === 'slide') {\n    refreshView()\n    markdown.removeClass('slides')\n  }\n  // only render again when meta changed\n  if (JSON.stringify(md.meta) !== JSON.stringify(lastMeta)) {\n    parseMeta(md, null, markdown, $('#ui-toc'), $('#ui-toc-affix'))\n    rendered = md.render(text)\n  }\n  // prevent XSS\n  rendered = preventXSS(rendered)\n  const result = postProcess(rendered)\n  markdown.html(result.html())\n}\n$(document.body).show()\n\nremoveDOMEvents(markdown)\nfinishView(markdown)\nautoLinkify(markdown)\ndeduplicatedHeaderId(markdown)\nrenderTOC(markdown)\ngenerateToc('ui-toc')\ngenerateToc('ui-toc-affix')\nsmoothHashScroll()\nwindow.createtime = window.lastchangeui.time.attr('data-createtime')\nwindow.lastchangetime = window.lastchangeui.time.attr('data-updatetime')\nupdateLastChange()\n\nconst url = window.location.pathname\n$('.ui-edit').attr('href', `${url}/edit`)\nconst toc = $('.ui-toc')\nconst tocAffix = $('.ui-affix-toc')\nconst tocDropdown = $('.ui-toc-dropdown')\n// toc\ntocDropdown.click(e => {\n  e.stopPropagation()\n})\n\nlet enoughForAffixToc = true\n\nfunction generateScrollspy () {\n  $(document.body).scrollspy({\n    target: ''\n  })\n  $(document.body).scrollspy('refresh')\n  if (enoughForAffixToc) {\n    toc.hide()\n    tocAffix.show()\n  } else {\n    tocAffix.hide()\n    toc.show()\n  }\n  $(document.body).scroll()\n}\n\nfunction windowResize () {\n  // toc right\n  const paddingRight = parseFloat(markdown.css('padding-right'))\n  const right = ($(window).width() - (markdown.offset().left + markdown.outerWidth() - paddingRight))\n  toc.css('right', `${right}px`)\n  // affix toc left\n  let newbool\n  const rightMargin = (markdown.parent().outerWidth() - markdown.outerWidth()) / 2\n  // for ipad or wider device\n  if (rightMargin >= 133) {\n    newbool = true\n    const affixLeftMargin = (tocAffix.outerWidth() - tocAffix.width()) / 2\n    const left = markdown.offset().left + markdown.outerWidth() - affixLeftMargin\n    tocAffix.css('left', `${left}px`)\n  } else {\n    newbool = false\n  }\n  if (newbool !== enoughForAffixToc) {\n    enoughForAffixToc = newbool\n    generateScrollspy()\n  }\n}\n$(window).resize(() => {\n  windowResize()\n})\n$(document).ready(() => {\n  windowResize()\n  generateScrollspy()\n  setTimeout(scrollToHash, 0)\n  // tooltip\n  $('[data-toggle=\"tooltip\"]').tooltip()\n})\n\nexport function scrollToTop () {\n  $('body, html').stop(true, true).animate({\n    scrollTop: 0\n  }, 100, 'linear')\n}\n\nexport function scrollToBottom () {\n  $('body, html').stop(true, true).animate({\n    scrollTop: $(document.body)[0].scrollHeight\n  }, 100, 'linear')\n}\n\nwindow.scrollToTop = scrollToTop\nwindow.scrollToBottom = scrollToBottom\n"],"sourceRoot":""}