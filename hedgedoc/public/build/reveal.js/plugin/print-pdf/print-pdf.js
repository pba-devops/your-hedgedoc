var n=require("system"),t=new WebPage,o=new WebPage,i=n.args[1]||"index.html?print-pdf",a=n.args[2]||"slides.pdf";a.match(/\.pdf$/gi)===null&&(a+=".pdf"),console.log("Export PDF: Reading reveal.js config [1/4]"),t.open(i,function(l){console.log("Export PDF: Preparing print layout [2/4]");var e=t.evaluate(function(){return Reveal.getConfig()});e?(o.paperSize={width:Math.floor(e.width*(1+e.margin)),height:Math.floor(e.height*(1+e.margin)),border:0},o.open(i,function(r){console.log("Export PDF: Preparing pdf [3/4]"),o.evaluate(function(){Reveal.isReady()?window.callPhantom():Reveal.addEventListener("pdf-ready",window.callPhantom)})}),o.onCallback=function(r){setTimeout(function(){console.log("Export PDF: Writing file [4/4]"),o.render(a),console.log("Export PDF: Finished successfully!"),phantom.exit()},0)}):(console.log("Export PDF: Unable to read reveal.js config. Make sure the input address points to a reveal.js page."),phantom.exit(1))});
