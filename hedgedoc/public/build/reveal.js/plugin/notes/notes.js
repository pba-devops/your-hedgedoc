var w=function(){var t=null;function i(l){if(t&&!t.closed){t.focus();return}if(!l){var d=document.querySelector('script[src$="notes.js"]').src;d=d.replace(/notes\.js(\?.*)?$/,""),l=d+"notes.html"}if(t=window.open(l,"reveal.js - Notes","width=1100,height=700"),!t){alert("Speaker view popup failed to open. Please make sure popups are allowed and reopen the speaker view.");return}function v(){var o=setInterval(function(){t.postMessage(JSON.stringify({namespace:"reveal-notes",type:"connect",url:window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,state:Reveal.getState()}),"*")},500);window.addEventListener("message",function(a){var e=JSON.parse(a.data);e&&e.namespace==="reveal-notes"&&e.type==="connected"&&(clearInterval(o),u()),e&&e.namespace==="reveal-notes"&&e.type==="call"&&p(e.methodName,e.arguments,e.callId)})}function p(o,a,e){var s=Reveal[o].apply(Reveal,a);t.postMessage(JSON.stringify({namespace:"reveal-notes",type:"return",result:s,callId:e}),"*")}function n(o){var a=Reveal.getCurrentSlide(),e=a.querySelector("aside.notes"),s=a.querySelector(".current-fragment"),r={namespace:"reveal-notes",type:"state",notes:"",markdown:!1,whitespace:"normal",state:Reveal.getState()};if(a.hasAttribute("data-notes")&&(r.notes=a.getAttribute("data-notes"),r.whitespace="pre-wrap"),s){var c=s.querySelector("aside.notes");c?e=c:s.hasAttribute("data-notes")&&(r.notes=s.getAttribute("data-notes"),r.whitespace="pre-wrap",e=null)}e&&(r.notes=e.innerHTML,r.markdown=typeof e.getAttribute("data-markdown")=="string"),t.postMessage(JSON.stringify(r),"*")}function u(){Reveal.addEventListener("slidechanged",n),Reveal.addEventListener("fragmentshown",n),Reveal.addEventListener("fragmenthidden",n),Reveal.addEventListener("overviewhidden",n),Reveal.addEventListener("overviewshown",n),Reveal.addEventListener("paused",n),Reveal.addEventListener("resumed",n),n()}v()}return{init:function(){/receiver/i.test(window.location.search)||(window.location.search.match(/(\?|\&)notes/gi)!==null&&i(),Reveal.addKeyBinding({keyCode:83,key:"S",description:"Speaker notes view"},function(){i()}))},open:i}}();Reveal.registerPlugin("notes",w);
