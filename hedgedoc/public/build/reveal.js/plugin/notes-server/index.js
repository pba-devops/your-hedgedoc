var u=require("http"),a=require("express"),s=require("fs"),n=require("socket.io"),d=require("mustache"),o=a(),p=a.static,i=u.createServer(o);n=n(i);var r={port:1947,baseDir:__dirname+"/../../"};n.on("connection",function(e){e.on("new-subscriber",function(t){e.broadcast.emit("new-subscriber",t)}),e.on("statechanged",function(t){delete t.state.overview,e.broadcast.emit("statechanged",t)}),e.on("statechanged-speaker",function(t){delete t.state.overview,e.broadcast.emit("statechanged-speaker",t)})}),["css","js","images","plugin","lib"].forEach(function(e){o.use("/"+e,p(r.baseDir+e))}),o.get("/",function(e,t){t.writeHead(200,{"Content-Type":"text/html"}),s.createReadStream(r.baseDir+"/index.html").pipe(t)}),o.get("/notes/:socketId",function(e,t){s.readFile(r.baseDir+"plugin/notes-server/notes.html",function(m,l){t.send(d.to_html(l.toString(),{socketId:e.params.socketId}))})}),i.listen(r.port||null);var v="\x1B[33m",g="\x1B[32m",c="\x1B[0m",h="http://localhost"+(r.port?":"+r.port:"");console.log(v+"reveal.js - Speaker Notes"+c),console.log("1. Open the slides at "+g+h+c),console.log("2. Click on the link in your JS console to go to the notes page"),console.log("3. Advance through your slides and your notes will advance automatically");
