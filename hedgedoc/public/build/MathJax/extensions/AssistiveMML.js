(function(h,d,i,u){var M=i.config.menuSettings,c=MathJax.Extension.AssistiveMML={version:"2.7.9",config:i.CombineConfig("AssistiveMML",{disabled:!1,styles:{".MJX_Assistive_MathML":{position:"absolute!important",top:0,left:0,clip:i.Browser.isMSIE&&(document.documentMode||0)<8?"rect(1px 1px 1px 1px)":"rect(1px, 1px, 1px, 1px)",padding:"1px 0 0 0!important",border:"0!important",height:"1px!important",width:"1px!important",overflow:"hidden!important",display:"block!important","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"},".MJX_Assistive_MathML.MJX_Assistive_MathML_Block":{width:"100%!important"}}}),Config:function(){!this.config.disabled&&M.assistiveMML==null&&i.Config({menuSettings:{assistiveMML:!0}}),h.Styles(this.config.styles),i.Register.MessageHook("End Math",function(e){if(M.assistiveMML)return c.AddAssistiveMathML(e[1])})},AddAssistiveMathML:function(e){var s={jax:i.getAllJax(e),i:0,callback:MathJax.Callback({})};return this.HandleMML(s),s.callback},RemoveAssistiveMathML:function(e){for(var s=i.getAllJax(e),t,n=0,a=s.length;n<a;n++)t=document.getElementById(s[n].inputID+"-Frame"),t&&t.getAttribute("data-mathml")&&(t.removeAttribute("data-mathml"),t.lastChild&&t.lastChild.className.match(/MJX_Assistive_MathML/)&&t.removeChild(t.lastChild))},HandleMML:function(e){var s=e.jax.length,t,n,a,r,l=MathJax.ElementJax.mml;for(l.copyAttributes.id=1;e.i<s;){if(t=e.jax[e.i],a=document.getElementById(t.inputID+"-Frame"),t.outputJax!=="NativeMML"&&t.outputJax!=="PlainSource"&&a&&!a.getAttribute("data-mathml")){try{n=t.root.toMathML("").replace(/\n */g,"").replace(/<!--.*?-->/g,"")}catch(o){if(l.copyAttributes.id=!0,!o.restart)throw o;return MathJax.Callback.After(["HandleMML",this,e],o.restart)}a.setAttribute("data-mathml",n),r=u.addElement(a,"span",{isMathJax:!0,unselectable:"on",className:"MJX_Assistive_MathML"+(t.root.Get("display")==="block"?" MJX_Assistive_MathML_Block":"")});try{r.innerHTML=n}catch(o){}a.style.position="relative",a.setAttribute("role","presentation"),a.firstChild.setAttribute("aria-hidden","true"),r.setAttribute("role","presentation")}e.i++}l.copyAttributes.id=!0,e.callback()}};i.Startup.signal.Post("AssistiveMML Ready")})(MathJax.Ajax,MathJax.Callback,MathJax.Hub,MathJax.HTML),MathJax.Callback.Queue(["Require",MathJax.Ajax,"[MathJax]/extensions/toMathML.js"],["loadComplete",MathJax.Ajax,"[MathJax]/extensions/AssistiveMML.js"],function(){MathJax.Hub.Register.StartupHook("End Config",["Config",MathJax.Extension.AssistiveMML])});
