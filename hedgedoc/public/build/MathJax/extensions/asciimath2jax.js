MathJax.Extension.asciimath2jax={version:"2.7.9",config:{delimiters:[["`","`"]],skipTags:["script","noscript","style","textarea","pre","code","annotation","annotation-xml"],ignoreClass:"asciimath2jax_ignore",processClass:"asciimath2jax_process",preview:"AsciiMath"},ignoreTags:{br:MathJax.Hub.Browser.isMSIE&&document.documentMode<9?`
`:" ",wbr:"","#comment":""},PreProcess:function(t){this.configured||(this.config=MathJax.Hub.CombineConfig("asciimath2jax",this.config),this.config.Augment&&MathJax.Hub.Insert(this,this.config.Augment),this.configured=!0),typeof t=="string"&&(t=document.getElementById(t)),t||(t=document.body),this.createPatterns()&&this.scanElement(t,t.nextSibling)},createPatterns:function(){var t=[],s,i,e=this.config;if(this.match={},e.delimiters.length===0)return!1;for(s=0,i=e.delimiters.length;s<i;s++)t.push(this.patternQuote(e.delimiters[s][0])),this.match[e.delimiters[s][0]]={mode:"",end:e.delimiters[s][1],pattern:this.endPattern(e.delimiters[s][1])};this.start=new RegExp(t.sort(this.sortLength).join("|"),"g"),this.skipTags=new RegExp("^("+e.skipTags.join("|")+")$","i");var a=[];return MathJax.Hub.config.preRemoveClass&&a.push(MathJax.Hub.config.preRemoveClass),e.ignoreClass&&a.push(e.ignoreClass),this.ignoreClass=a.length?new RegExp("(^| )("+a.join("|")+")( |$)"):/^$/,this.processClass=new RegExp("(^| )("+e.processClass+")( |$)"),!0},patternQuote:function(t){return t.replace(/([\^$(){}+*?\-|\[\]\:\\])/g,"\\$1")},endPattern:function(t){return new RegExp(this.patternQuote(t)+"|\\\\.","g")},sortLength:function(t,s){return t.length!==s.length?s.length-t.length:t==s?0:t<s?-1:1},scanElement:function(t,s,i){for(var e,a,r,n;t&&t!=s;)t.nodeName.toLowerCase()==="#text"?i||(t=this.scanText(t)):(e=typeof t.className=="undefined"?"":t.className,a=typeof t.tagName=="undefined"?"":t.tagName,typeof e!="string"&&(e=String(e)),n=this.processClass.exec(e),t.firstChild&&!e.match(/(^| )MathJax/)&&(n||!this.skipTags.exec(a))&&(r=(i||this.ignoreClass.exec(e))&&!n,this.scanElement(t.firstChild,s,r))),t&&(t=t.nextSibling)},scanText:function(t){if(t.nodeValue.replace(/\s+/,"")=="")return t;var s,i,e=0,a;for(this.search={start:!0},this.pattern=this.start;t;){for(a=null,this.pattern.lastIndex=e||0,e=0;t&&t.nodeName.toLowerCase()==="#text"&&(s=this.pattern.exec(t.nodeValue));)this.search.start?t=this.startMatch(s,t):t=this.endMatch(s,t);if(this.search.matched?t=this.encloseMath(t):this.search.start||(a=this.search),t){do i=t,t=t.nextSibling;while(t&&this.ignoreTags[t.nodeName.toLowerCase()]!=null);if(!t||t.nodeName!=="#text"){if(!a)return i;t=a.open,e=a.opos+a.olen,this.search={start:!0},this.pattern=this.start}}}return t},startMatch:function(t,s){var i=this.match[t[0]];return i!=null&&(this.search={end:i.end,mode:i.mode,open:s,olen:t[0].length,opos:this.pattern.lastIndex-t[0].length},this.switchPattern(i.pattern)),s},endMatch:function(t,s){return t[0]==this.search.end&&(this.search.close=s,this.search.cpos=this.pattern.lastIndex,this.search.clen=this.search.isBeginEnd?0:t[0].length,this.search.matched=!0,s=this.encloseMath(s),this.switchPattern(this.start)),s},switchPattern:function(t){t.lastIndex=this.pattern.lastIndex,this.pattern=t,this.search.start=t===this.start},encloseMath:function(t){var s=this.search,i=s.close,e,a,r;for(s.cpos===i.length?i=i.nextSibling:i=i.splitText(s.cpos),i||(e=i=MathJax.HTML.addText(s.close.parentNode,"")),s.close=i,a=s.opos?s.open.splitText(s.opos):s.open;(r=a.nextSibling)&&r!==i;){if(r.nodeValue!==null)r.nodeName==="#comment"?a.nodeValue+=r.nodeValue.replace(/^\[CDATA\[((.|\n|\r)*)\]\]$/,"$1"):a.nodeValue+=a.nextSibling.nodeValue;else{var n=this.ignoreTags[r.nodeName.toLowerCase()];a.nodeValue+=n==null?" ":n}a.parentNode.removeChild(r)}var o=a.nodeValue.substr(s.olen,a.nodeValue.length-s.olen-s.clen);return a.parentNode.removeChild(a),this.config.preview!=="none"&&this.createPreview(s.mode,o),a=this.createMathTag(s.mode,o),this.search={},this.pattern.lastIndex=0,e&&e.parentNode.removeChild(e),a},insertNode:function(t){var s=this.search;s.close.parentNode.insertBefore(t,s.close)},createPreview:function(t,s){var i=MathJax.Hub.config.preRemoveClass,e=this.config.preview;e!=="none"&&(this.search.close.previousSibling||{}).className!==i&&(e==="AsciiMath"&&(e=[this.filterPreview(s)]),e&&(e=MathJax.HTML.Element("span",{className:i},e),this.insertNode(e)))},createMathTag:function(t,s){var i=document.createElement("script");return i.type="math/asciimath"+t,MathJax.HTML.setScript(i,s),this.insertNode(i),i},filterPreview:function(t){return t}},MathJax.Hub.Register.PreProcessor(["PreProcess",MathJax.Extension.asciimath2jax]),MathJax.Ajax.loadComplete("[MathJax]/extensions/asciimath2jax.js");
