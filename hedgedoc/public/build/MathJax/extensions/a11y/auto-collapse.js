(function(e){var n=e.config.menuSettings,d={},h=MathJax.Ajax.config.path;h.a11y||(h.a11y=e.config.root+"/extensions/a11y");var s=MathJax.Extension["auto-collapse"]={version:"1.6.0",config:e.CombineConfig("auto-collapse",{disabled:!1}),dependents:[],Enable:function(t,i){n.autocollapse=!0,i&&(d.autocollapse=!0),this.config.disabled=!1,MathJax.Extension.collapsible.Enable(!1,i),t&&e.Queue(["Reprocess",e],["CollapseWideMath",this])},Disable:function(t,i){n.autocollapse=!1,i&&(d.autocollapse=!1),this.config.disabled=!0;for(var a=this.dependents.length-1;0<=a;a--){var o=this.dependents[a];o.Disable&&o.Disable(!1,i)}t&&e.Queue(["Rerender",e])},Dependent:function(t){this.dependents.push(t)},Startup:function(){var t=MathJax.Extension.collapsible;t&&t.Dependent(this),e.postInputHooks.Add(["Filter",s],150),e.Queue(function(){return s.CollapseWideMath()}),window.addEventListener?window.addEventListener("resize",s.resizeHandler,!1):window.attachEvent?window.attachEvent("onresize",s.resizeHandler):window.onresize=s.resizeHandler},Filter:function(t,i,a){t.enriched&&!this.config.disabled&&(t.root.Get("display")==="block"||a.parentNode.childNodes.length<=3)&&(t.root.SRE={action:this.Actions(t.root)})},Actions:function(t){var i=[];return this.getActions(t,0,i),this.sortActions(i)},getActions:function(t,i,a){if(!t.isToken&&t.data){i++;for(var o,r=0,u=t.data.length;r<u;r++)t.data[r]&&((o=t.data[r]).collapsible?(a[i]||(a[i]=[]),a[i].push(o),this.getActions(o.data[1],i,a)):this.getActions(o,i,a))}},sortActions:function(t){for(var i=[],a=0,o=t.length;a<o;a++)t[a]&&(i=i.concat(t[a].sort(this.sortActionsBy)));return i},sortActionsBy:function(t,i){return(t=t.data[1].complexity)<(i=i.data[1].complexity)?-1:i<t?1:0},CollapseWideMath:function(t){if(!this.config.disabled){this.GetContainerWidths(t);var i=e.getAllJax(t),a={collapse:[],jax:i,m:i.length,i:0,changed:!1};return this.collapseState(a)}},collapseState:function(t){for(var i=t.collapse;t.i<t.m;){var a=t.jax[t.i],o=a.root.SRE;if(t.changed=!1,o&&o.action.length&&(o.cwidth<o.m||o.cwidth>o.M)){var r=this.getActionWidths(a,t);if(r)return r;this.collapseActions(o,t),t.changed&&i.push(a.SourceElement())}t.i++}if(i.length!==0)return i.length===1&&(i=i[0]),e.Rerender(i)},collapseActions:function(t,i){for(var a=t.width,o=a,r=1e6,u=t.action.length-1;0<=u;u--){var l=t.action[u],c=l.selection;a>t.cwidth?(l.selection=1,o=l.SREwidth,r=a):l.selection=2,a=l.SREwidth,t.DOMupdate?document.getElementById(l.id).setAttribute("selection",l.selection):l.selection!==c&&(i.changed=!0)}t.m=o,t.M=r},getActionWidths:function(t,i){if(!t.root.SRE.actionWidths){MathJax.OutputJax[t.outputJax].getMetrics(t);try{this.computeActionWidths(t)}catch(a){if(!a.restart)throw a;return MathJax.Callback.After(["collapseState",this,i],a.restart)}i.changed=!0}return null},computeActionWidths:function(t){var i,a=t.root.SRE,o=a.action,r={};for(a.width=t.sreGetRootWidth(r),i=o.length-1;0<=i;i--)o[i].selection=2;for(i=o.length-1;0<=i;i--){var u=o[i];u.SREwidth==null&&(u.selection=1,u.SREwidth=t.sreGetActionWidth(r,u))}a.actionWidths=!0},GetContainerWidths:function(t){for(var i,a,o,r=e.getAllJax(t),u=MathJax.HTML.Element("span",{style:{display:"block"}}),l=[],c=0,p=r.length;c<p;c++)o=(a=r[c]).root,SRE=o.SRE,SRE&&SRE.action.length&&(SRE.width==null&&(a.sreGetMetrics(),SRE.m=SRE.width,SRE.M=1e6),(i=a.SourceElement()).previousSibling.style.display="none",i.parentNode.insertBefore(u.cloneNode(!1),i),l.push([a,i]));for(c=0,p=l.length;c<p;c++)a=l[c][0],(i=l[c][1]).previousSibling.offsetWidth&&(a.root.SRE.cwidth=i.previousSibling.offsetWidth*a.root.SRE.em);for(c=0,p=l.length;c<p;c++)a=l[c][0],(i=l[c][1]).parentNode.removeChild(i.previousSibling),i.previousSibling.style.display=""},timer:null,running:!1,retry:!1,saved_delay:0,resizeHandler:function(t){s.config.disabled||(s.running?s.retry=!0:(s.timer&&clearTimeout(s.timer),s.timer=setTimeout(s.resizeAction,100)))},resizeAction:function(){s.timer=null,s.running=!0,e.Queue(function(){s.saved_delay=e.processSectionDelay,e.processSectionDelay=0},["CollapseWideMath",s],["resizeCheck",s])},resizeCheck:function(){s.running=!1,e.processSectionDelay=s.saved_delay,s.retry&&(s.retry=!1,setTimeout(s.resizeHandler,0))}};e.Register.StartupHook("End Extensions",function(){n.autocollapse==null?n.autocollapse=!s.config.disabled:s.config.disabled=!n.autocollapse,e.Register.StartupHook("MathMenu Ready",function(){d=MathJax.Menu.cookie;var t,i=MathJax.Menu.ITEM,a=MathJax.Menu.menu,o=i.CHECKBOX(["AutoCollapse","Auto Collapse"],"autocollapse",{action:function(l){s[n.autocollapse?"Enable":"Disable"](!0,!0),MathJax.Menu.saveCookie()}}),r=(a.FindId("Accessibility")||{}).submenu;r?(t=r.IndexOfId("AutoCollapse"))!==null?r.items[t]=o:(t=r.IndexOfId("CollapsibleMath"),r.items.splice(t+1,0,o)):(t=a.IndexOfId("CollapsibleMath"),a.items.splice(t+1,0,o));function u(){s[n.autocollapse?"Enable":"Disable"]()}MathJax.Extension.collapse?u():MathJax.Hub.Register.StartupHook("Auto Collapse Ready",u)},25)},25)})(MathJax.Hub),MathJax.ElementJax.Augment({sreGetMetrics:function(){MathJax.OutputJax[this.outputJax].sreGetMetrics(this,this.root.SRE)},sreGetRootWidth:function(e){return MathJax.OutputJax[this.outputJax].sreGetRootWidth(this,e)},sreGetActionWidth:function(e,n){return MathJax.OutputJax[this.outputJax].sreGetActionWidth(this,e,n)}}),MathJax.OutputJax.Augment({getMetrics:function(){},sreGetMetrics:function(e,n){n.cwidth=1e6,n.width=0,n.em=12},sreGetRootWidth:function(e,n){return 0},sreGetActionWidth:function(e,n,d){return 0}}),MathJax.Hub.Register.StartupHook("HTML-CSS Jax Ready",function(){MathJax.OutputJax["HTML-CSS"].Augment({sreGetMetrics:function(e,n){n.width=e.root.data[0].HTMLspanElement().parentNode.bbox.w,n.em=1/e.HTMLCSS.em/e.HTMLCSS.scale},sreGetRootWidth:function(e,n){var d=e.root.data[0].HTMLspanElement();return n.box=d.parentNode,n.box.bbox.w},sreGetActionWidth:function(e,n,d){return e.root.data[0].toHTML(n.box).bbox.w}})}),MathJax.Hub.Register.StartupHook("SVG Jax Ready",function(){MathJax.OutputJax.SVG.Augment({getMetrics:function(e){this.em=MathJax.ElementJax.mml.mbase.prototype.em=e.SVG.em,this.ex=e.SVG.ex,this.linebreakWidth=e.SVG.lineWidth,this.cwidth=e.SVG.cwidth},sreGetMetrics:function(e,n){n.width=e.root.SVGdata.w/1e3,n.em=1/e.SVG.em},sreGetRootWidth:function(e,n){return n.span=document.getElementById(e.inputID+"-Frame"),e.root.SVGdata.w/1e3},sreGetActionWidth:function(e,n,d){this.mathDiv=n.span,n.span.appendChild(this.textSVG);try{e.root.data[0].toSVG()}catch(s){var h=s}if(n.span.removeChild(this.textSVG),h)throw h;return e.root.data[0].SVGdata.w/1e3}})}),MathJax.Hub.Register.StartupHook("CommonHTML Jax Ready",function(){MathJax.OutputJax.CommonHTML.Augment({sreGetMetrics:function(e,n){n.width=e.root.CHTML.w,n.em=1/e.CHTML.em/e.CHTML.scale},sreGetRootWidth:function(e,n){return n.span=document.getElementById(e.inputID+"-Frame").firstChild,n.tmp=document.createElement("span"),n.tmp.className=n.span.className,e.root.CHTML.w/e.CHTML.scale},sreGetActionWidth:function(e,n,d){n.span.parentNode.replaceChild(n.tmp,n.span),MathJax.OutputJax.CommonHTML.CHTMLnode=n.tmp;try{e.root.data[0].toCommonHTML(n.tmp)}catch(s){var h=s}if(n.tmp.parentNode.replaceChild(n.span,n.tmp),h)throw h;return e.root.data[0].CHTML.w/e.CHTML.scale}})}),MathJax.Hub.Register.StartupHook("NativeMML Jax Ready",function(){MathJax.OutputJax.NativeMML.Augment({sreGetMetrics:function(e,n){var d=document.getElementById(e.inputID+"-Frame");n.width=d.offsetWidth,n.em=1,n.DOMupdate=!0},sreGetRootWidth:function(e,n){return n.span=document.getElementById(e.inputID+"-Frame").firstChild,n.span.offsetWidth},sreGetActionWidth:function(e,n,d){return document.getElementById(d.id).setAttribute("selection",1),n.span.offsetWidth}})}),MathJax.Ajax.Require("[a11y]/collapsible.js"),MathJax.Hub.Register.StartupHook("Collapsible Ready",function(){MathJax.Extension["auto-collapse"].Startup(),MathJax.Hub.Startup.signal.Post("Auto Collapse Ready"),MathJax.Ajax.loadComplete("[a11y]/auto-collapse.js")});
