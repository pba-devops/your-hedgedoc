(function(s,d){var i,u,r=s.config.menuSettings,f=Function.prototype.bind?function(e,t){return e.bind(t)}:function(e,t){return function(){e.apply(t,arguments)}},M=Object.keys||function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(a);return t},h=MathJax.Ajax.config.path;h.a11y||(h.a11y=s.config.root+"/extensions/a11y");var n=d["accessibility-menu"]={version:"1.6.0",prefix:"",defaults:{},modules:[],MakeOption:function(e){return n.prefix+e},GetOption:function(e){return r[n.MakeOption(e)]},AddDefaults:function(){for(var e,t=M(n.defaults),a=0;e=t[a];a++){var o=n.MakeOption(e);r[o]===void 0&&(r[o]=n.defaults[e])}},AddMenu:function(){for(var e,t=Array(this.modules.length),a=0;e=this.modules[a];a++)t[a]=e.placeHolder;var o,p,l=u.FindId("Accessibility");l?(t.unshift(i.RULE()),l.submenu.items.push.apply(l.submenu.items,t)):((o=(u.FindId("Settings","Renderer")||{}).submenu)&&(t.unshift(i.RULE()),t.unshift(o.items.pop()),t.unshift(o.items.pop())),t.unshift("Accessibility"),l=i.SUBMENU.apply(i.SUBMENU,t),(p=u.IndexOfId("Locale"))?u.items.splice(p,0,l):u.items.push(i.RULE(),l))},Register:function(e){n.defaults[e.option]=!1,n.modules.push(e)},Startup:function(){i=MathJax.Menu.ITEM,u=MathJax.Menu.menu;for(var e,t=0;e=this.modules[t];t++)e.CreateMenu();this.AddMenu()},LoadExtensions:function(){for(var e,t=[],a=0;e=this.modules[a];a++)r[e.option]&&t.push(e.module);return t.length?s.Startup.loadArray(t):null}},c=MathJax.Extension.ModuleLoader=MathJax.Object.Subclass({option:"",name:["",""],module:"",placeHolder:null,submenu:!1,extension:null,Init:function(e,t,a,o,p){this.option=e,this.name=[t.replace(/ /g,""),t],this.module=a,this.extension=o,this.submenu=p||!1},CreateMenu:function(){var e=f(this.Load,this);this.submenu?this.placeHolder=i.SUBMENU(this.name,i.CHECKBOX(["Activate","Activate"],n.MakeOption(this.option),{action:e}),i.RULE(),i.COMMAND(["OptionsWhenActive","(Options when Active)"],null,{disabled:!0})):this.placeHolder=i.CHECKBOX(this.name,n.MakeOption(this.option),{action:e})},Load:function(){s.Queue(["Require",MathJax.Ajax,this.module,["Enable",this]])},Enable:function(e){var t=MathJax.Extension[this.extension];t&&(t.Enable(!0,!0),MathJax.Menu.saveCookie())}});n.Register(c("collapsible","Collapsible Math","[a11y]/collapsible.js","collapsible")),n.Register(c("autocollapse","Auto Collapse","[a11y]/auto-collapse.js","auto-collapse")),n.Register(c("explorer","Explorer","[a11y]/explorer.js","explorer",!0)),n.AddDefaults(),s.Register.StartupHook("End Extensions",function(){s.Register.StartupHook("MathMenu Ready",function(){n.Startup(),s.Startup.signal.Post("Accessibility Menu Ready")},5)},5),MathJax.Hub.Register.StartupHook("End Cookie",function(){MathJax.Callback.Queue(["LoadExtensions",n],["loadComplete",MathJax.Ajax,"[a11y]/accessibility-menu.js"])})})(MathJax.Hub,MathJax.Extension);
