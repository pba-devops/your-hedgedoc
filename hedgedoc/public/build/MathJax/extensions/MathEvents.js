(function(l,y,p,x,J,g,T){var H="2.7.9",b=MathJax.Extension,n=b.MathEvents={version:H},f=l.config.menuSettings,u={hover:500,frame:{x:3.5,y:5,bwidth:1,bcolor:"#A6D",hwidth:"15px",hcolor:"#83A"},button:{x:-6,y:-3,wx:-2},fadeinInc:.2,fadeoutInc:.05,fadeDelay:50,fadeoutStart:400,fadeoutDelay:15*1e3,styles:{".MathJax_Hover_Frame":{"border-radius":".25em","-webkit-border-radius":".25em","-moz-border-radius":".25em","-khtml-border-radius":".25em","box-shadow":"0px 0px 15px #83A","-webkit-box-shadow":"0px 0px 15px #83A","-moz-box-shadow":"0px 0px 15px #83A","-khtml-box-shadow":"0px 0px 15px #83A",border:"1px solid #A6D ! important",display:"inline-block",position:"absolute"},".MathJax_Menu_Button .MathJax_Hover_Arrow":{position:"absolute",cursor:"pointer",display:"inline-block",border:"2px solid #AAA","border-radius":"4px","-webkit-border-radius":"4px","-moz-border-radius":"4px","-khtml-border-radius":"4px","font-family":"'Courier New',Courier","font-size":"9px",color:"#F0F0F0"},".MathJax_Menu_Button .MathJax_Hover_Arrow span":{display:"block","background-color":"#AAA",border:"1px solid","border-radius":"3px","line-height":0,padding:"4px"},".MathJax_Hover_Arrow:hover":{color:"white!important",border:"2px solid #CCC!important"},".MathJax_Hover_Arrow:hover span":{"background-color":"#CCC!important"}}},a=n.Event={LEFTBUTTON:0,RIGHTBUTTON:2,MENUKEY:"altKey",KEY:{RETURN:13,ESCAPE:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,LESS:188,GREATER:190,DASH:189},Mousedown:function(e){return a.Handler(e,"Mousedown",this)},Mouseup:function(e){return a.Handler(e,"Mouseup",this)},Mousemove:function(e){return a.Handler(e,"Mousemove",this)},Mouseover:function(e){return a.Handler(e,"Mouseover",this)},Mouseout:function(e){return a.Handler(e,"Mouseout",this)},Click:function(e){return a.Handler(e,"Click",this)},DblClick:function(e){return a.Handler(e,"DblClick",this)},Menu:function(e){return a.Handler(e,"ContextMenu",this)},Handler:function(e,t,o){if(p.loadingMathMenu)return a.False(e);var i=g[o.jaxID];if(e||(e=window.event),e.isContextMenu=t==="ContextMenu",i[t])return i[t](e,o);if(b.MathZoom)return b.MathZoom.HandleEvent(e,t,o)},False:function(e){return e||(e=window.event),e&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0),!1},Keydown:function(e,t){e||(e=window.event),e.keyCode===a.KEY.SPACE&&a.ContextMenu(e,this)},ContextMenu:function(e,t,o){var i=g[t.jaxID],r=i.getJaxFromMath(t),C=(i.config.showMathMenu!=null?i:l).config.showMathMenu;if(!(!C||f.context!=="MathJax"&&!o)){n.msieEventBug&&(e=window.event||e),a.ClearSelection(),h.ClearHoverTimer(),r.hover&&(r.hover.remove&&(clearTimeout(r.hover.remove),delete r.hover.remove),r.hover.nofade=!0);var d=MathJax.Menu,v,c;if(d){if(d.loadingDomain)return a.False(e);if(v=J.loadDomain("MathMenu"),!v){d.jax=r;var m=d.menu.Find("Show Math As").submenu;m.items[0].name=r.sourceMenuTitle,m.items[0].format=r.sourceMenuFormat||"MathML",m.items[1].name=T[r.inputJax].sourceMenuTitle,m.items[5].disabled=!T[r.inputJax].annotationEncoding;var M=m.items[2];M.disabled=!0;var E=M.submenu.items;annotationList=MathJax.Hub.Config.semanticsAnnotations;for(var w=0,k=E.length;w<k;w++){var N=E[w].name[1];r.root&&r.root.getAnnotation(N)!==null?(M.disabled=!1,E[w].hidden=!1):E[w].hidden=!0}var S=d.menu.Find("Math Settings","MathPlayer");return S.hidden=!(r.outputJax==="NativeMML"&&l.Browser.hasMathPlayer),d.menu.Post(e)}d.loadingDomain=!0,c=function(){delete d.loadingDomain}}else{if(p.loadingMathMenu)return a.False(e);p.loadingMathMenu=!0,v=p.Require("[MathJax]/extensions/MathMenu.js"),c=function(){delete p.loadingMathMenu,MathJax.Menu||(MathJax.Menu={})}}var I={pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY};return x.Queue(v,c,["ContextMenu",a,I,t,o]),a.False(e)}},AltContextMenu:function(e,t){var o=g[t.jaxID],i=(o.config.showMathMenu!=null?o:l).config.showMathMenu;if(i){if(i=(o.config.showMathMenuMSIE!=null?o:l).config.showMathMenuMSIE,f.context==="MathJax"&&!f.mpContext&&i){if(!n.noContextMenuBug||e.button!==a.RIGHTBUTTON)return}else if(!e[a.MENUKEY]||e.button!==a.LEFTBUTTON)return;return o.ContextMenu(e,t,!0)}},ClearSelection:function(){n.safariContextMenuBug&&setTimeout("window.getSelection().empty()",0),document.selection&&setTimeout("document.selection.empty()",0)},getBBox:function(e){e.appendChild(n.topImg);var t=n.topImg.offsetTop,o=e.offsetHeight-t,i=e.offsetWidth;return e.removeChild(n.topImg),{w:i,h:t,d:o}}},h=n.Hover={Mouseover:function(e,t){if(f.discoverable||f.zoom==="Hover"){var o=e.fromElement||e.relatedTarget,i=e.toElement||e.target;if(o&&i&&(l.isMathJaxNode(o)!==l.isMathJaxNode(i)||l.getJaxFor(o)!==l.getJaxFor(i))){var r=this.getJaxFromMath(t);return r.hover?h.ReHover(r):h.HoverTimer(r,t),a.False(e)}}},Mouseout:function(e,t){if(f.discoverable||f.zoom==="Hover"){var o=e.fromElement||e.relatedTarget,i=e.toElement||e.target;if(o&&i&&(l.isMathJaxNode(o)!==l.isMathJaxNode(i)||l.getJaxFor(o)!==l.getJaxFor(i))){var r=this.getJaxFromMath(t);return r.hover?h.UnHover(r):h.ClearHoverTimer(),a.False(e)}}},Mousemove:function(e,t){if(f.discoverable||f.zoom==="Hover"){var o=this.getJaxFromMath(t);return o.hover||h.lastX==e.clientX&&h.lastY==e.clientY?void 0:(h.lastX=e.clientX,h.lastY=e.clientY,h.HoverTimer(o,t),a.False(e))}},HoverTimer:function(e,t){this.ClearHoverTimer(),this.hoverTimer=setTimeout(x(["Hover",this,e,t]),u.hover)},ClearHoverTimer:function(){this.hoverTimer&&(clearTimeout(this.hoverTimer),delete this.hoverTimer)},Hover:function(e,t){if(!(b.MathZoom&&b.MathZoom.Hover({},t))){var o=g[e.outputJax],i=o.getHoverSpan(e,t),r=o.getHoverBBox(e,i,t),C=(o.config.showMathMenu!=null?o:l).config.showMathMenu,d=u.frame.x,v=u.frame.y,c=u.frame.bwidth;n.msieBorderWidthBug&&(c=0),e.hover={opacity:0,id:e.inputID+"-Hover"};var m=y.Element("span",{id:e.hover.id,isMathJax:!0,style:{display:"inline-block",width:0,height:0,position:"relative"}},[["span",{className:"MathJax_Hover_Frame",isMathJax:!0,style:{display:"inline-block",position:"absolute",top:this.Px(-r.h-v-c-(r.y||0)),left:this.Px(-d-c+(r.x||0)),width:this.Px(r.w+2*d),height:this.Px(r.h+r.d+2*v),opacity:0,filter:"alpha(opacity=0)"}}]]),M=y.Element("span",{isMathJax:!0,id:e.hover.id+"Menu",className:"MathJax_Menu_Button",style:{display:"inline-block","z-index":1,width:0,height:0,position:"relative"}},[["span",{className:"MathJax_Hover_Arrow",isMathJax:!0,math:t,onclick:this.HoverMenu,jax:o.id,style:{left:this.Px(r.w+d+c+(r.x||0)+u.button.x),top:this.Px(-r.h-v-c-(r.y||0)-u.button.y),opacity:0,filter:"alpha(opacity=0)"}},[["span",{isMathJax:!0},"\u25BC"]]]]);r.width&&(m.style.width=M.style.width=r.width,m.style.marginRight=M.style.marginRight="-"+r.width,m.firstChild.style.width=r.width,M.firstChild.style.left="",M.firstChild.style.right=this.Px(u.button.wx)),i.parentNode.insertBefore(m,i),C&&i.parentNode.insertBefore(M,i),i.style&&(i.style.position="relative"),this.ReHover(e)}},ReHover:function(e){e.hover.remove&&clearTimeout(e.hover.remove),e.hover.remove=setTimeout(x(["UnHover",this,e]),u.fadeoutDelay),this.HoverFadeTimer(e,u.fadeinInc)},UnHover:function(e){e.hover.nofade||this.HoverFadeTimer(e,-u.fadeoutInc,u.fadeoutStart)},HoverFade:function(e){delete e.hover.timer,e.hover.opacity=Math.max(0,Math.min(1,e.hover.opacity+e.hover.inc)),e.hover.opacity=Math.floor(1e3*e.hover.opacity)/1e3;var t=document.getElementById(e.hover.id),o=document.getElementById(e.hover.id+"Menu");if(t.firstChild.style.opacity=e.hover.opacity,t.firstChild.style.filter="alpha(opacity="+Math.floor(100*e.hover.opacity)+")",o&&(o.firstChild.style.opacity=e.hover.opacity,o.firstChild.style.filter=t.style.filter),e.hover.opacity!==1){if(e.hover.opacity>0){this.HoverFadeTimer(e,e.hover.inc);return}t.parentNode.removeChild(t),o&&o.parentNode.removeChild(o),e.hover.remove&&clearTimeout(e.hover.remove),delete e.hover}},HoverFadeTimer:function(e,t,o){e.hover.inc=t,e.hover.timer||(e.hover.timer=setTimeout(x(["HoverFade",this,e]),o||u.fadeDelay))},HoverMenu:function(e){return e||(e=window.event),g[this.jax].ContextMenu(e,this.math,!0)},ClearHover:function(e){e.hover.remove&&clearTimeout(e.hover.remove),e.hover.timer&&clearTimeout(e.hover.timer),h.ClearHoverTimer(),delete e.hover},Px:function(e){return Math.abs(e)<.006?"0px":e.toFixed(2).replace(/\.?0+$/,"")+"px"},getImages:function(){if(f.discoverable){var e=new Image;e.src=u.button.src}}},s=n.Touch={last:0,delay:500,start:function(e){var t=new Date().getTime(),o=t-s.last<s.delay&&s.up;s.last=t,s.up=!1,o&&(s.timeout=setTimeout(s.menu,s.delay,e,this),e.preventDefault())},end:function(e){var t=new Date().getTime();if(s.up=t-s.last<s.delay,s.timeout)return clearTimeout(s.timeout),delete s.timeout,s.last=0,s.up=!1,e.preventDefault(),a.Handler(e.touches[0]||e.touch,"DblClick",this)},menu:function(e,t){return delete s.timeout,s.last=0,s.up=!1,a.Handler(e.touches[0]||e.touch,"ContextMenu",t)}};l.Browser.Select({MSIE:function(e){var t=document.documentMode||0,o=e.versionAtLeast("8.0");n.msieBorderWidthBug=document.compatMode==="BackCompat",n.msieEventBug=e.isIE9,n.msieAlignBug=!o||t<8,t<9&&(a.LEFTBUTTON=1)},Safari:function(e){n.safariContextMenuBug=!0},Opera:function(e){n.operaPositionBug=!0},Konqueror:function(e){n.noContextMenuBug=!0}}),n.topImg=n.msieAlignBug?y.Element("img",{style:{width:0,height:0,position:"relative"},src:"about:blank"}):y.Element("span",{style:{width:0,height:0,display:"inline-block"}}),n.operaPositionBug&&(n.topImg.style.border="1px solid"),n.config=u=l.CombineConfig("MathEvents",u);var F=function(){var e=u.styles[".MathJax_Hover_Frame"];e.border=u.frame.bwidth+"px solid "+u.frame.bcolor+" ! important",e["box-shadow"]=e["-webkit-box-shadow"]=e["-moz-box-shadow"]=e["-khtml-box-shadow"]="0px 0px "+u.frame.hwidth+" "+u.frame.hcolor};x.Queue(l.Register.StartupHook("End Config",{}),[F],["getImages",h],["Styles",p,u.styles],["Post",l.Startup.signal,"MathEvents Ready"],["loadComplete",p,"[MathJax]/extensions/MathEvents.js"])})(MathJax.Hub,MathJax.HTML,MathJax.Ajax,MathJax.Callback,MathJax.Localization,MathJax.OutputJax,MathJax.InputJax);
