MathJax.Hub.Register.StartupHook("CommonHTML Jax Ready",function(){var p="2.7.9",T=MathJax.ElementJax.mml,u=MathJax.Hub.config,L=MathJax.OutputJax.CommonHTML,H=T.mo().With({CHTML:L.BBOX.empty()}),C={newline:0,nobreak:1e6,goodbreak:[-200],badbreak:[200],auto:[0],maxwidth:1.33,toobig:800,nestfactor:400,spacefactor:-100,spaceoffset:2,spacelimit:1,fence:500,close:500},g={linebreakstyle:"after"};T.mbase.Augment({CHTMLlinebreakPenalty:C,CHTMLmultiline:function(e){for(var t=this;t.inferred||t.parent&&t.parent.type==="mrow"&&t.parent.isEmbellished();)t=t.parent;var a=t.type==="math"&&t.Get("display")==="block"||t.type==="mtd";t.isMultiline=!0;var i=this.getValues("linebreak","linebreakstyle","lineleading","linebreakmultchar","indentalign","indentshift","indentalignfirst","indentshiftfirst","indentalignlast","indentshiftlast");i.linebreakstyle===T.LINEBREAKSTYLE.INFIXLINEBREAKSTYLE&&(i.linebreakstyle=this.Get("infixlinebreakstyle")),i.lineleading=this.CHTMLlength2em(i.lineleading,.5),L.BBOX.empty(this.CHTML);for(var l=L.addElement(e,"mjx-stack"),s={BBOX:this.CHTML,n:0,Y:0,scale:this.CHTML.scale||1,isTop:a,values:{},VALUES:i},h=this.CHTMLgetAlign(s,{}),n=this.CHTMLgetShift(s,{},h),r=[],d={index:[],penalty:C.nobreak,w:0,W:n,shift:n,scanW:n,nest:0},c=!1;this.CHTMLbetterBreak(d,s,!0)&&(d.scanW>=L.linebreakWidth||d.penalty===C.newline);)this.CHTMLaddLine(l,r,d.index,s,d.values,c),r=d.index.slice(0),c=!0,h=this.CHTMLgetAlign(s,d.values),n=this.CHTMLgetShift(s,d.values,h),d.W=d.shift=d.scanW=n,d.penalty=C.nobreak;return s.isLast=!0,this.CHTMLaddLine(l,r,[],s,g,c),t.type==="math"&&(e.style.width=l.style.width=this.CHTML.pwidth="100%"),this.CHTML.mwidth=L.Em(this.CHTML.w),this.CHTML.isMultiline=t.CHTML.isMultiline=!0,l.style.verticalAlign=L.Em(s.d-this.CHTML.d),e},CHTMLbetterBreak:function(e,t,a){if(this.isToken)return!1;if(this.isEmbellished())return e.embellished=this,this.CoreMO().CHTMLbetterBreak(e,t);if(this.linebreakContainer)return!1;var i=e.index.slice(0),l=e.index.shift(),s=this.data.length,h,n,r,d=e.index.length>0,c=!1;for(l==null&&(l=-1),d||(l++,e.W+=e.w,e.w=0),r=e.scanW=e.W,e.nest++;l<s&&(e.scanW<C.maxwidth*L.linebreakWidth||e.w===0);){if(this.data[l]){if(this.data[l].CHTMLbetterBreak(e,t)&&(c=!0,i=[l].concat(e.index),h=e.W,n=e.w,e.penalty===C.newline))return e.index=i,e.nest&&e.nest--,!0;r=d?e.scanW:this.CHTMLaddWidth(l,e,r)}e.index=[],l++,d=!1}return a&&c&&(H.parent=this.parent,H.inherit=this.inherit,H.CHTMLbetterBreak(e,t)&&(c=!1,i=e.index)),e.nest&&e.nest--,e.index=i,c&&(e.W=h,e.w=n),c},CHTMLaddWidth:function(e,t,a){if(this.data[e]){var i=this.data[e].CHTML;a+=(i.w+(i.L||0)+(i.R||0))*(i.scale||1),t.W=t.scanW=a,t.w=0}return a},CHTMLaddLine:function(e,t,a,i,l,s){var h=L.addElement(e,"mjx-block",{},[["mjx-box"]]),n=h.firstChild,r=i.bbox=L.BBOX.empty();i.first=s,i.last=!0,this.CHTMLmoveLine(t,a,n,i,l),r.clean();var d=this.CHTMLgetAlign(i,l),c=this.CHTMLgetShift(i,l,d,!0),M=0;if(i.n>0){var m=L.FONTDATA.baselineskip,f=(i.values.lineleading==null?i.VALUES:i.values).lineleading*i.scale,b=i.Y;i.Y-=Math.max(m,i.d+r.h+f),M=b-i.Y-i.d-r.h}c&&(n.style.margin="0 "+L.Em(-c)+" 0 "+L.Em(c)),d!==T.INDENTALIGN.LEFT&&(h.style.textAlign=d),M&&(h.style.paddingTop=L.Em(M)),i.BBOX.combine(r,c,i.Y),i.d=i.bbox.d,i.values=l,i.n++},CHTMLgetAlign:function(e,t){var a=t,i=e.values,l=e.VALUES,s;return e.n===0?s=a.indentalignfirst||i.indentalignfirst||l.indentalignfirst:e.isLast?s=i.indentalignlast||l.indentalignlast:s=i.indentalign||l.indentalign,s===T.INDENTALIGN.INDENTALIGN&&(s=i.indentalign||l.indentalign),s===T.INDENTALIGN.AUTO&&(s=e.isTop?u.displayAlign:T.INDENTALIGN.LEFT),s},CHTMLgetShift:function(e,t,a,i){var l=t,s=e.values,h=e.VALUES,n;if(e.n===0?n=l.indentshiftfirst||s.indentshiftfirst||h.indentshiftfirst:e.isLast?n=s.indentshiftlast||h.indentshiftlast:n=s.indentshift||h.indentshift,n===T.INDENTSHIFT.INDENTSHIFT&&(n=s.indentshift||h.indentshift),(n==="auto"||n==="")&&(n="0"),n=this.CHTMLlength2em(n,L.cwidth),e.isTop&&u.displayIndent!=="0"){var r=this.CHTMLlength2em(u.displayIndent,L.cwidth);n+=a===T.INDENTALIGN.RIGHT?-r:r}return a===T.INDENTALIGN.RIGHT&&!i?-n:n},CHTMLmoveLine:function(e,t,a,i,l){var s=e[0],h=t[0];if(s==null&&(s=-1),h==null&&(h=this.data.length-1),s===h&&e.length>1)this.data[s].CHTMLmoveSlice(e.slice(1),t.slice(1),a,i,l,"marginLeft");else{var n=i.last;for(i.last=!1;s<h;)this.data[s]&&(e.length<=1?this.data[s].CHTMLmoveNode(a,i,l):this.data[s].CHTMLmoveSlice(e.slice(1),[],a,i,l,"marginLeft")),s++,i.first=!1,e=[];i.last=n,this.data[s]&&(t.length<=1?this.data[s].CHTMLmoveNode(a,i,l):this.data[s].CHTMLmoveSlice([],t.slice(1),a,i,l,"marginRight"))}},CHTMLmoveSlice:function(e,t,a,i,l,s){var h=this.CHTMLcreateSliceNode(a);return this.CHTMLmoveLine(e,t,h,i,l),h.style[s]&&(h.style[s]=""),this.CHTML.L&&(s!=="marginLeft"?i.bbox.w+=this.CHTML.L:h.className=h.className.replace(/ MJXc-space\d/,"")),this.CHTML.R&&s!=="marginRight"&&(i.bbox.w+=this.CHTML.R),t.length===0&&(a=this.CHTMLnodeElement(),this.href&&(a=a.parentNode),a.parentNode.removeChild(a),a.nextMathJaxNode.id=a.id),h},CHTMLcreateSliceNode:function(e){var t=this.CHTMLnodeElement(),a=0;this.href&&(t=t.parentNode);for(var i=t;i.nextMathJaxNode;)i=i.nextMathJaxNode,a++;var l=t.cloneNode(!1);return i.nextMathJaxNode=l,l.nextMathJaxNode=null,l.id+="-MJX-Continue-"+a,e.appendChild(l)},CHTMLmoveNode:function(e,t,a){if(!(t.first||t.last)||t.first&&t.values.linebreakstyle===T.LINEBREAKSTYLE.BEFORE||t.last&&a.linebreakstyle===T.LINEBREAKSTYLE.AFTER){var i=this.CHTMLnodeElement();this.href&&(i=i.parentNode),e.appendChild(i),this.CHTML.pwidth&&!e.style.width&&(e.style.width=this.CHTML.pwidth),t.last&&(i.style.marginRight=""),(t.first||t.nextIsFirst)&&(i.style.marginLeft="",this.CHTML.L=0,i.className=i.className.replace(/ MJXc-space\d/,"")),t.first&&this.CHTML.w===0?t.nextIsFirst=!0:delete t.nextIsFirst,t.bbox.combine(this.CHTML,t.bbox.w,0)}}}),T.mfenced.Augment({CHTMLbetterBreak:function(e,t){var a=e.index.slice(0),i=e.index.shift(),l=this.data.length,s,h,n,r=e.index.length>0,d=!1;if(i==null&&(i=-1),r||(i++,e.W+=e.w,e.w=0),n=e.scanW=e.W,e.nest++,!this.dataI){this.dataI=[],this.data.open&&this.dataI.push("open"),l&&this.dataI.push(0);for(var c=1;c<l;c++)this.data["sep"+c]&&this.dataI.push("sep"+c),this.dataI.push(c);this.data.close&&this.dataI.push("close")}for(l=this.dataI.length;i<l&&(e.scanW<C.maxwidth*L.linebreakWidth||e.w===0);){var M=this.dataI[i];if(this.data[M]){if(this.data[M].CHTMLbetterBreak(e,t)&&(d=!0,a=[i].concat(e.index),s=e.W,h=e.w,e.penalty===C.newline))return e.index=a,e.nest&&e.nest--,!0;n=r?e.scanW:this.CHTMLaddWidth(i,e,n)}e.index=[],i++,r=!1}return e.nest&&e.nest--,e.index=a,d&&(e.W=s,e.w=h),d},CHTMLmoveLine:function(e,t,a,i,l){var s=e[0],h=t[0];if(s==null&&(s=-1),h==null&&(h=this.dataI.length-1),s===h&&e.length>1)this.data[this.dataI[s]].CHTMLmoveSlice(e.slice(1),t.slice(1),a,i,l,"marginLeft");else{var n=i.last;i.last=!1;for(var r=this.dataI[s];s<h;)this.data[r]&&(e.length<=1?this.data[r].CHTMLmoveNode(a,i,l):this.data[r].CHTMLmoveSlice(e.slice(1),[],a,i,l,"marginLeft")),s++,r=this.dataI[s],i.first=!1,e=[];i.last=n,this.data[r]&&(t.length<=1?this.data[r].CHTMLmoveNode(a,i,l):this.data[r].CHTMLmoveSlice([],t.slice(1),a,i,l,"marginRight"))}}}),T.msubsup.Augment({CHTMLbetterBreak:function(e,t){if(!this.data[this.base])return!1;var a=e.index.slice(0),i=e.index.shift(),l,s,h,n=e.index.length>0,r=!1;return n||(e.W+=e.w,e.w=0),h=e.scanW=e.W,i==null&&(this.CHTML.baseW=this.data[this.base].CHTML.w,this.CHTML.dw=this.CHTML.w-this.CHTML.baseW),this.data[this.base].CHTMLbetterBreak(e,t)&&(r=!0,a=[this.base].concat(e.index),l=e.W,s=e.w,e.penalty===C.newline&&(r=n=!0)),n||this.CHTMLaddWidth(this.base,e,h),e.scanW+=this.CHTML.dw,e.W=e.scanW,e.index=[],r&&(e.W=l,e.w=s,e.index=a),r},CHTMLmoveLine:function(e,t,a,i,l){if(this.data[this.base]){var s=L.addElement(a,"mjx-base"),h=this.data[this.base].CHTML.ic;h&&(s.style.marginRight=L.Em(-h)),e.length>1?this.data[this.base].CHTMLmoveSlice(e.slice(1),t.slice(1),s,i,l,"marginLeft"):t.length<=1?this.data[this.base].CHTMLmoveNode(s,i,l):this.data[this.base].CHTMLmoveSlice([],t.slice(1),s,i,l,"marginRight")}if(t.length===0){var n=this.CHTMLnodeElement(),r=L.getNode(n,"mjx-stack"),d=L.getNode(n,"mjx-sup"),c=L.getNode(n,"mjx-sub");r?a.appendChild(r):d?a.appendChild(d):c&&a.appendChild(c);var M=i.bbox.w,m;d&&(m=this.data[this.sup].CHTML,i.bbox.combine(m,M,m.Y)),c&&(m=this.data[this.sub].CHTML,i.bbox.combine(m,M,m.Y))}}}),T.mmultiscripts.Augment({CHTMLbetterBreak:function(e,t){if(!this.data[this.base])return!1;var a=e.index.slice(0);e.index.shift();var i,l,s,h=e.index.length>0,n=!1;h||(e.W+=e.w,e.w=0),e.scanW=e.W;var r=this.CHTML,d=this.data[this.base].CHTML,c=r.w-d.w-(r.X||0);return e.scanW+=r.X||0,s=e.scanW,this.data[this.base].CHTMLbetterBreak(e,t)&&(n=!0,a=[this.base].concat(e.index),i=e.W,l=e.w,e.penalty===C.newline&&(n=h=!0)),h||this.CHTMLaddWidth(this.base,e,s),e.scanW+=c,e.W=e.scanW,e.index=[],n&&(e.W=i,e.w=l,e.index=a),n},CHTMLmoveLine:function(e,t,a,i,l){var s,h=this.CHTMLbbox,n;if(e.length<1){s=this.CHTMLnodeElement();var r=L.getNode(s,"mjx-prestack"),d=L.getNode(s,"mjx-presup"),c=L.getNode(s,"mjx-presub");r?a.appendChild(r):d?a.appendChild(d):c&&a.appendChild(c),n=i.bbox.w,d&&i.bbox.combine(h.presup,n+h.presup.X,h.presup.Y),c&&i.bbox.combine(h.presub,n+h.presub.X,h.presub.Y)}if(this.data[this.base]){var M=L.addElement(a,"mjx-base");e.length>1?this.data[this.base].CHTMLmoveSlice(e.slice(1),t.slice(1),M,i,l,"marginLeft"):t.length<=1?this.data[this.base].CHTMLmoveNode(M,i,l):this.data[this.base].CHTMLmoveSlice([],t.slice(1),M,i,l,"marginRight")}if(t.length===0){s=this.CHTMLnodeElement();var m=L.getNode(s,"mjx-stack"),f=L.getNode(s,"mjx-sup"),b=L.getNode(s,"mjx-sub");m?a.appendChild(m):f?a.appendChild(f):b&&a.appendChild(b),n=i.bbox.w,f&&i.bbox.combine(h.sup,n,h.sup.Y),b&&i.bbox.combine(h.sub,n,h.sub.Y)}}}),T.mo.Augment({CHTMLbetterBreak:function(e,t){if(e.values&&e.values.id===this.CHTMLnodeID)return!1;var a=this.getValues("linebreak","linebreakstyle","lineleading","linebreakmultchar","indentalign","indentshift","indentalignfirst","indentshiftfirst","indentalignlast","indentshiftlast","texClass","fence");a.linebreakstyle===T.LINEBREAKSTYLE.INFIXLINEBREAKSTYLE&&(a.linebreakstyle=this.Get("infixlinebreakstyle")),a.texClass===T.TEXCLASS.OPEN&&e.nest++,a.texClass===T.TEXCLASS.CLOSE&&e.nest&&e.nest--;var i=e.scanW;delete e.embellished;var l=this.CHTML.w+(this.CHTML.L||0)+(this.CHTML.R||0);if(a.linebreakstyle===T.LINEBREAKSTYLE.AFTER&&(i+=l,l=0),i-e.shift===0&&a.linebreak!==T.LINEBREAK.NEWLINE)return!1;var s=L.linebreakWidth-i;if(t.n===0&&(a.indentshiftfirst!==t.VALUES.indentshiftfirst||a.indentalignfirst!==t.VALUES.indentalignfirst)){var h=this.CHTMLgetAlign(t,a),n=this.CHTMLgetShift(t,a,h);s+=e.shift-n}var r=Math.floor(s/L.linebreakWidth*1e3);r<0&&(r=C.toobig-3*r),a.fence&&(r+=C.fence),(a.linebreakstyle===T.LINEBREAKSTYLE.AFTER&&a.texClass===T.TEXCLASS.OPEN||a.texClass===T.TEXCLASS.CLOSE)&&(r+=C.close),r+=e.nest*C.nestfactor;var d=C[a.linebreak||T.LINEBREAK.AUTO]||0;return MathJax.Object.isArray(d)?r=Math.max(1,r+d[0]*e.nest):(d||s>=0)&&(r=d*e.nest),r>=e.penalty?!1:(e.penalty=r,e.values=a,e.W=i,e.w=l,a.lineleading=this.CHTMLlength2em(a.lineleading,t.VALUES.lineleading),a.id=this.CHTMLnodeID,!0)}}),T.mspace.Augment({CHTMLbetterBreak:function(e,t){if(e.values&&e.values.id===this.CHTMLnodeID)return!1;var a=this.getValues("linebreak"),i=a.linebreak;(!i||this.hasDimAttr())&&(i=T.LINEBREAK.AUTO);var l=e.scanW,s=this.CHTML.w+(this.CHTML.L||0)+(this.CHTML.R||0);if(l-e.shift===0)return!1;var h=L.linebreakWidth-l,n=Math.floor(h/L.linebreakWidth*1e3);n<0&&(n=C.toobig-3*n),n+=e.nest*C.nestfactor;var r=C[i]||0;return i===T.LINEBREAK.AUTO&&s>=C.spacelimit&&!this.mathbackground&&!this.background&&(r=[(s+C.spaceoffset)*C.spacefactor]),MathJax.Object.isArray(r)?n=Math.max(1,n+r[0]*e.nest):(r||h>=0)&&(n=r*e.nest),n>=e.penalty?!1:(e.penalty=n,e.values=a,e.W=l,e.w=s,a.lineleading=t.VALUES.lineleading,a.linebreakstyle="before",a.id=this.CHTMLnodeID,!0)}}),MathJax.Hub.Register.StartupHook("TeX mathchoice Ready",function(){T.TeXmathchoice.Augment({CHTMLbetterBreak:function(e,t){return this.Core().CHTMLbetterBreak(e,t)},CHTMLmoveLine:function(e,t,a,i,l){return this.Core().CHTMLmoveSlice(e,t,a,i,l)}})}),T.maction.Augment({CHTMLbetterBreak:function(e,t){return this.Core().CHTMLbetterBreak(e,t)},CHTMLmoveLine:function(e,t,a,i,l){return this.Core().CHTMLmoveSlice(e,t,a,i,l)}}),T.semantics.Augment({CHTMLbetterBreak:function(e,t){return this.data[0]?this.data[0].CHTMLbetterBreak(e,t):!1},CHTMLmoveLine:function(e,t,a,i,l){return this.data[0]?this.data[0].CHTMLmoveSlice(e,t,a,i,l):null}}),MathJax.Hub.Startup.signal.Post("CommonHTML multiline Ready"),MathJax.Ajax.loadComplete(L.autoloadDir+"/multiline.js")});
